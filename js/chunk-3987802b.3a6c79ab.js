(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3987802b"],{"023a":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"happysynth-draw"},[s("div",{staticClass:"happysynth-draw-btns-container"},[s("a-button",{attrs:{"btn-type":"primary"},on:{click:function(e){return t.$refs.postConfirm.show()}}},[s("icon",{attrs:{"icon-type":"check"}})],1),s("a-button",{attrs:{"btn-type":"danger"},on:{click:function(e){return t.$refs.redoConfirm.show()}}},[s("icon",{attrs:{"icon-type":"redo"}})],1)],1),s("div",[s("sketchpad",{ref:"sketchpad"})],1),s("modal",{ref:"redoConfirm",attrs:{title:"是否重画？","modal-type":"slim"},on:{clickOK:function(e){return t.redo()}}},[s("p",[t._v("点击确认将擦除所有笔迹")])]),s("modal",{ref:"postConfirm",attrs:{title:"是否提交波形？"},on:{clickOK:function(e){return t.postWaveform()}}},[s("p",[t._v("点击确认向服务器提交您绘制的波形")])]),s("message-container",[s("message",{attrs:{"is-shown":t.postMsg}},[s("icon",{staticStyle:{color:"blue"},attrs:{"icon-type":"loading"}}),t._v(" 提交并制作音色中")],1),s("message",{attrs:{"is-shown":t.postFailMsg}},[s("icon",{staticStyle:{color:"red"},attrs:{"icon-type":"warning"}}),t._v(" 提交失败")],1),s("message",{attrs:{"is-shown":t.postSuccessMsg}},[s("icon",{staticStyle:{color:"green"},attrs:{"icon-type":"check"}}),t._v(" 完成")],1)],1)],1)},i=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"sketchpad"}},[s("svg",{attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 500 400"}},[s("polyline",{staticStyle:{stroke:"var(--stroke-color)","stroke-width":"2","fill-opacity":"0"},attrs:{id:"line1",points:""}}),s("polyline",{staticStyle:{stroke:"var(--stroke-color)","stroke-width":"2","fill-opacity":"0"},attrs:{id:"line2",points:""}}),s("polyline",{staticStyle:{stroke:"var(--stroke-color)","stroke-width":"2","fill-opacity":"0"},attrs:{id:"line3",points:""}}),s("polyline",{staticStyle:{stroke:"var(--stroke-color)","stroke-width":"2","fill-opacity":"0"},attrs:{id:"line4",points:""}}),s("polyline",{staticStyle:{stroke:"var(--stroke-color)","stroke-width":"2","fill-opacity":"0"},attrs:{id:"line5",points:""}}),s("polyline",{staticStyle:{stroke:"var(--stroke-color)","stroke-width":"2","fill-opacity":"0"},attrs:{id:"line6",points:""}}),s("polyline",{staticStyle:{stroke:"var(--stroke-color)","stroke-width":"2","fill-opacity":"0"},attrs:{id:"line7",points:""}}),s("polyline",{staticStyle:{stroke:"var(--stroke-color)","stroke-width":"2","fill-opacity":"0"},attrs:{id:"line8",points:""}}),s("polyline",{staticStyle:{stroke:"var(--stroke-color)","stroke-width":"2","fill-opacity":"0"},attrs:{id:"line9",points:""}}),s("polyline",{staticStyle:{stroke:"var(--stroke-color)","stroke-width":"2","fill-opacity":"0"},attrs:{id:"line10",points:""}}),s("line",{staticStyle:{stroke:"var(--mark-color)","stroke-width":"2"},attrs:{x1:"20",y1:"200",x2:"490",y2:"200"}}),s("circle",{attrs:{cx:"20",cy:"200",r:"10",fill:"var(--mark-color)"}})])])},a=[],r=(s("159b"),{name:"Sketchpad",data:function(){return{isDrawing:!1,baseSet:!1,baseX:0,baseY:0,i:1,polyline:void 0,waveform:{x:[],y:[]}}},methods:{redoDraw:function(){document.getElementsByTagName("polyline").forEach((function(t){t.setAttribute("points","")})),this.waveform.x=[],this.waveform.y=[],this.i=1}},mounted:function(){var t=this;document.getElementById("sketchpad").addEventListener("mousedown",(function(e){t.baseSet||(t.baseX=e.clientX-10,t.baseY=e.clientY-200,t.baseSet=!0),t.polyline=document.getElementById("line"+t.i),t.polyline.setAttribute("points",t.polyline.getAttribute("points")+" "+(e.clientX-t.baseX)+","+(e.clientY-t.baseY)),t.i++,t.isDrawing=!0,t.waveform.x.push(e.clientX),t.waveform.y.push(e.clientY)})),document.getElementById("sketchpad").addEventListener("mousemove",(function(e){t.isDrawing&&(t.polyline.setAttribute("points",t.polyline.getAttribute("points")+" "+(e.clientX-t.baseX)+","+(e.clientY-t.baseY)),t.waveform.x.push(e.clientX),t.waveform.y.push(e.clientY))})),document.addEventListener("mouseup",(function(e){t.isDrawing=!1}))}}),l=r,c=(s("b3e6"),s("2877")),p=Object(c["a"])(l,n,a,!1,null,"2f9db410",null),u=p.exports,d=s("89e0"),f=s("c4fe"),y=s("5353"),m=s("8b27"),h=s("d3a7"),k=s("6d7b"),v={name:"HappySynthDraw",components:{Sketchpad:u,Icon:d["a"],AButton:f["a"],Modal:y["a"],MessageContainer:h["a"],Message:m["a"]},data:function(){return{postMsg:!1,postSuccessMsg:!1,postFailMsg:!1}},methods:{redo:function(){this.$refs.sketchpad.redoDraw(),this.$refs.redoConfirm.close()},postWaveform:function(){var t=this;this.$refs.postConfirm.close(),this.postMsg=!0,k["a"].post("",this.$refs.sketchpad.waveform).then((function(e){t.postMsg=!1,t.postSuccessMsg=!0,setTimeout((function(){t.postSuccessMsg=!1}),500)})).catch((function(e){console.log(e),t.postMsg=!1,t.postFailMsg=!0,setTimeout((function(){t.postFailMsg=!1}),500)}))}}},b=v,w=(s("f195"),Object(c["a"])(b,o,i,!1,null,null,null));e["default"]=w.exports},5353:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isShown?s("div",{staticClass:"modal-wrapper"},[s("div",{staticClass:"modal",class:{"modal-slim":"slim"===t.modalType}},[s("div",{staticClass:"modal-content"},[s("button",{staticClass:"modal-close-button",attrs:{type:"button"},on:{click:t.close}},[s("span",{staticClass:"modal-close-x"},[s("icon",{attrs:{"icon-type":"close"}})],1)]),s("div",{staticClass:"modal-header"},[t._v(t._s(t.title))]),s("div",{staticClass:"modal-body"},[t._t("default")],2),s("div",{staticClass:"modal-footer"},[s("a-button",{on:{click:t.close}},[t._v("Cancel")]),s("a-button",{attrs:{"btn-type":"primary"},on:{click:function(e){return t.$emit("clickOK")}}},[t._v("OK")])],1)])])]):t._e()},i=[],n=s("c4fe"),a=s("89e0"),r={name:"Modal",props:{title:{type:String,default:""},modalType:{type:String,default:"default"}},data:function(){return{isShown:!1}},components:{AButton:n["a"],Icon:a["a"]},methods:{show:function(){this.isShown=!0},close:function(){this.isShown=!1}}},l=r,c=(s("b134"),s("2877")),p=Object(c["a"])(l,o,i,!1,null,null,null);e["a"]=p.exports},8532:function(t,e,s){},ae3c:function(t,e,s){},b134:function(t,e,s){"use strict";var o=s("b7af"),i=s.n(o);i.a},b3e6:function(t,e,s){"use strict";var o=s("ae3c"),i=s.n(o);i.a},b7af:function(t,e,s){},c4fe:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"a-btn",class:{"a-btn-primary":t.isPrimary,"a-btn-danger":t.isDanger},attrs:{type:"button"},on:{click:t.click}},[t._t("default")],2)},i=[],n={name:"AButton",props:{btnType:{type:String,default:"default"}},computed:{isPrimary:function(){return"primary"===this.btnType},isDanger:function(){return"danger"===this.btnType}},methods:{click:function(t){this.$emit("click",t)}}},a=n,r=(s("db33"),s("2877")),l=Object(r["a"])(a,o,i,!1,null,null,null);e["a"]=l.exports},db33:function(t,e,s){"use strict";var o=s("8532"),i=s.n(o);i.a},f195:function(t,e,s){"use strict";var o=s("f3fc"),i=s.n(o);i.a},f3fc:function(t,e,s){}}]);
//# sourceMappingURL=chunk-3987802b.3a6c79ab.js.map