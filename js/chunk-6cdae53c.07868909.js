(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6cdae53c"],{"0009":function(t,e,i){"use strict";var n=i("c6ba"),o=i.n(n);o.a},"109c":function(t,e,i){},"159b":function(t,e,i){var n=i("da84"),o=i("fdbc"),a=i("17c2"),s=i("9112");for(var r in o){var u=n[r],c=u&&u.prototype;if(c&&c.forEach!==a)try{s(c,"forEach",a)}catch(h){c.forEach=a}}},1620:function(t,e,i){"use strict";(function(t){var n=i("d84e"),o=function(){if(!(this instanceof o))throw new Error("constructor needs to be called with the 'new' keyword")};
/**
 *  Tone.js
 *  @author Yotam Mann
 *  @license http://opensource.org/licenses/MIT MIT License
 *  @copyright 2014-2019 Yotam Mann
 */o.prototype.toString=function(){for(var t in o){var e=t[0].match(/^[A-Z]$/),i=o[t]===this.constructor;if(o.isFunction(o[t])&&e&&i)return t}return"Tone"},o.prototype.dispose=function(){return this},o.prototype.set=function(t,e){if(o.isString(t)){var i={};i[t]=e,t=i}t:for(var n in t){e=t[n];var a=this;if(-1!==n.indexOf(".")){for(var s=n.split("."),r=0;r<s.length-1;r++)if(a=a[s[r]],a instanceof o){s.splice(0,r+1);var u=s.join(".");a.set(u,e);continue t}n=s[s.length-1]}var c=a[n];o.isUndef(c)||(o.Signal&&c instanceof o.Signal||o.Param&&c instanceof o.Param?c.value!==e&&(c.value=e):c instanceof AudioParam?c.value!==e&&(c.value=e):o.TimeBase&&c instanceof o.TimeBase?a[n]=e:c instanceof o?c.set(e):c!==e&&(a[n]=e))}return this},o.prototype.get=function(t){o.isUndef(t)?t=this._collectDefaults(this.constructor):o.isString(t)&&(t=[t]);for(var e={},i=0;i<t.length;i++){var n=t[i],a=this,s=e;if(-1!==n.indexOf(".")){for(var r=n.split("."),u=0;u<r.length-1;u++){var c=r[u];s[c]=s[c]||{},s=s[c],a=a[c]}n=r[r.length-1]}var h=a[n];o.isObject(t[n])?s[n]=h.get():o.Signal&&h instanceof o.Signal?s[n]=h.value:o.Param&&h instanceof o.Param?s[n]=h.value:h instanceof AudioParam?s[n]=h.value:h instanceof o?s[n]=h.get():!o.isFunction(h)&&o.isDefined(h)&&(s[n]=h)}return e},o.prototype._collectDefaults=function(t){var e=[];if(o.isDefined(t.defaults)&&(e=Object.keys(t.defaults)),o.isDefined(t._super))for(var i=this._collectDefaults(t._super),n=0;n<i.length;n++)-1===e.indexOf(i[n])&&e.push(i[n]);return e},o.defaults=function(t,e,i){var n={};if(1===t.length&&o.isObject(t[0]))n=t[0];else for(var a=0;a<e.length;a++)n[e[a]]=t[a];return o.isDefined(i.defaults)?o.defaultArg(n,i.defaults):o.isObject(i)?o.defaultArg(n,i):n},o.defaultArg=function(t,e){if(o.isObject(t)&&o.isObject(e)){var i={};for(var n in t)i[n]=o.defaultArg(e[n],t[n]);for(var a in e)i[a]=o.defaultArg(t[a],e[a]);return i}return o.isUndef(t)?e:t},o.prototype.log=function(){if(this.debug||this.toString()===o.global.TONE_DEBUG_CLASS){var t=Array.from(arguments);t.unshift(this.toString()+":"),console.log.apply(void 0,t)}},o.prototype.assert=function(t,e){if(!t)throw new Error(e)},o.connectSeries=function(){for(var t=arguments[0],e=1;e<arguments.length;e++){var i=arguments[e];o.connect(t,i),t=i}return o},o.connect=function(t,e,i,n){while(o.isDefined(e.input))o.isArray(e.input)?(n=o.defaultArg(n,0),e=e.input[n],n=0):e.input&&(e=e.input);return e instanceof AudioParam?t.connect(e,i):e instanceof AudioNode&&t.connect(e,i,n),o},o.disconnect=function(t,e,i,n){if(e){var a=!1;while(!a)o.isArray(e.input)?(o.isDefined(n)?o.disconnect(t,e.input[n],i):e.input.forEach((function(e){try{o.disconnect(t,e,i)}catch(n){}})),a=!0):e.input?e=e.input:a=!0;e instanceof AudioParam?t.disconnect(e,i):e instanceof AudioNode&&t.disconnect(e,i,n)}else t.disconnect();return o},o.isUndef=function(t){return"undefined"===typeof t},o.isDefined=function(t){return!o.isUndef(t)},o.isFunction=function(t){return"function"===typeof t},o.isNumber=function(t){return"number"===typeof t},o.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object},o.isBoolean=function(t){return"boolean"===typeof t},o.isArray=function(t){return Array.isArray(t)},o.isString=function(t){return"string"===typeof t},o.isNote=function(t){return o.isString(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)},o.noOp=function(){},o.prototype._readOnly=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._readOnly(t[e]);else Object.defineProperty(this,t,{writable:!1,enumerable:!0})},o.prototype._writable=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._writable(t[e]);else Object.defineProperty(this,t,{writable:!0})},o.State={Started:"started",Stopped:"stopped",Paused:"paused"},o.global=o.isUndef(t)?window:t,o.equalPowerScale=function(t){var e=.5*Math.PI;return Math.sin(t*e)},o.dbToGain=function(t){return Math.pow(10,t/20)},o.gainToDb=function(t){return Math.log(t)/Math.LN10*20},o.intervalToFrequencyRatio=function(t){return Math.pow(2,t/12)},o.prototype.now=function(){return o.context.now()},o.now=function(){return o.context.now()},o.prototype.immediate=function(){return o.context.currentTime},o.immediate=function(){return o.context.currentTime},o.extend=function(t,e){function i(){}o.isUndef(e)&&(e=o),i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,t._super=e},o._audioContext=null,o.start=function(){return o.context.resume()},Object.defineProperty(o,"context",{get:function(){return o._audioContext},set:function(t){t.isContext?o._audioContext=t:o._audioContext=new o.Context(t),o.Context.emit("init",o._audioContext)}}),Object.defineProperty(o.prototype,"context",{get:function(){return o.context}}),o.setContext=function(t){o.context=t},Object.defineProperty(o.prototype,"blockTime",{get:function(){return 128/this.context.sampleRate}}),Object.defineProperty(o.prototype,"sampleTime",{get:function(){return 1/this.context.sampleRate}}),Object.defineProperty(o,"supported",{get:function(){var t=o.global.hasOwnProperty("AudioContext")||o.global.hasOwnProperty("webkitAudioContext"),e=o.global.hasOwnProperty("Promise");return t&&e}}),Object.defineProperty(o,"initialized",{get:function(){return Boolean(o.context)}}),o.getContext=function(t){if(o.initialized)t(o.context);else{var e=function(){t(o.context),o.Context.off("init",e)};o.Context.on("init",e)}return o},o.version=n["a"],e["a"]=o}).call(this,i("c8ba"))},"17c2":function(t,e,i){"use strict";var n=i("b727").forEach,o=i("b301");t.exports=o("forEach")?function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1a1c":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"happysynth-play"},[i("piano-keys",{attrs:{octave:"3"},on:{notedown:t.noteOn,noteup:t.noteOff}}),i("piano-keys",{attrs:{octave:"4"},on:{notedown:t.noteOn,noteup:t.noteOff}}),i("piano-keys",{attrs:{octave:"5"},on:{notedown:t.noteOn,noteup:t.noteOff}}),i("message-container",[i("message",{attrs:{"is-shown":t.loadingMsgShown}},[i("icon",{staticStyle:{color:"#28f"},attrs:{"icon-type":"loading"}}),t._v(" 加载音色采样中... ")],1),i("message",{attrs:{"is-shown":t.loadSuccessMsgShown}},[i("icon",{staticStyle:{color:"#6b6"},attrs:{"icon-type":"check"}}),t._v(" "+t._s(t.loadSuccessMsgText)+" ")],1),i("message",{attrs:{"is-shown":t.loadFailMsgShown}},[i("icon",{staticStyle:{color:"#f32"},attrs:{"icon-type":"warning"}}),t._v(" 加载失败 ")],1)],1)],1)},o=[],a=(i("d3b7"),i("3ca3"),i("ddb0"),i("92c1")),s=i("1620");s["a"].TimeBase=function(t,e){if(!(this instanceof s["a"].TimeBase))return new s["a"].TimeBase(t,e);if(this._val=t,this._units=e,s["a"].isUndef(this._units)&&s["a"].isString(this._val)&&parseFloat(this._val)==this._val&&"+"!==this._val.charAt(0))this._val=parseFloat(this._val),this._units=this._defaultUnits;else if(t&&t.constructor===this.constructor)this._val=t._val,this._units=t._units;else if(t instanceof s["a"].TimeBase)switch(this._defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi();break;default:throw new Error("Unrecognized default units "+this._defaultUnits)}},s["a"].extend(s["a"].TimeBase),s["a"].TimeBase.prototype._expressions={n:{regexp:/^(\d+)n(\.?)$/i,method:function(t,e){t=parseInt(t);var i="."===e?1.5:1;return 1===t?this._beatsToUnits(this._getTimeSignature())*i:this._beatsToUnits(4/t)*i}},t:{regexp:/^(\d+)t$/i,method:function(t){return t=parseInt(t),this._beatsToUnits(8/(3*parseInt(t)))}},m:{regexp:/^(\d+)m$/i,method:function(t){return this._beatsToUnits(parseInt(t)*this._getTimeSignature())}},i:{regexp:/^(\d+)i$/i,method:function(t){return this._ticksToUnits(parseInt(t))}},hz:{regexp:/^(\d+(?:\.\d+)?)hz$/i,method:function(t){return this._frequencyToUnits(parseFloat(t))}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/,method:function(t,e,i){var n=0;return t&&"0"!==t&&(n+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(n+=this._beatsToUnits(parseFloat(e))),i&&"0"!==i&&(n+=this._beatsToUnits(parseFloat(i)/4)),n}},s:{regexp:/^(\d+(?:\.\d+)?)s$/,method:function(t){return this._secondsToUnits(parseFloat(t))}},samples:{regexp:/^(\d+)samples$/,method:function(t){return parseInt(t)/this.context.sampleRate}},default:{regexp:/^(\d+(?:\.\d+)?)$/,method:function(t){return this._expressions[this._defaultUnits].method.call(this,t)}}},s["a"].TimeBase.prototype._defaultUnits="s",s["a"].TimeBase.prototype._getBpm=function(){return s["a"].Transport?s["a"].Transport.bpm.value:120},s["a"].TimeBase.prototype._getTimeSignature=function(){return s["a"].Transport?s["a"].Transport.timeSignature:4},s["a"].TimeBase.prototype._getPPQ=function(){return s["a"].Transport?s["a"].Transport.PPQ:192},s["a"].TimeBase.prototype._now=function(){return this.now()},s["a"].TimeBase.prototype._frequencyToUnits=function(t){return 1/t},s["a"].TimeBase.prototype._beatsToUnits=function(t){return 60/this._getBpm()*t},s["a"].TimeBase.prototype._secondsToUnits=function(t){return t},s["a"].TimeBase.prototype._ticksToUnits=function(t){return t*(this._beatsToUnits(1)/this._getPPQ())},s["a"].TimeBase.prototype._noArg=function(){return this._now()},s["a"].TimeBase.prototype.valueOf=function(){if(s["a"].isUndef(this._val))return this._noArg();if(s["a"].isString(this._val)&&s["a"].isUndef(this._units)){for(var t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(s["a"].isObject(this._val)){var e=0;for(var i in this._val){var n=this._val[i],o=new this.constructor(i).valueOf()*n;e+=o}return e}if(s["a"].isDefined(this._units)){var a=this._expressions[this._units],r=this._val.toString().trim().match(a.regexp);return r?a.method.apply(this,r.slice(1)):a.method.call(this,parseFloat(this._val))}return this._val},s["a"].TimeBase.prototype.toSeconds=function(){return this.valueOf()},s["a"].TimeBase.prototype.toFrequency=function(){return 1/this.toSeconds()},s["a"].TimeBase.prototype.toSamples=function(){return this.toSeconds()*this.context.sampleRate},s["a"].TimeBase.prototype.toMilliseconds=function(){return 1e3*this.toSeconds()},s["a"].TimeBase.prototype.dispose=function(){this._val=null,this._units=null};s["a"].TimeBase;s["a"].Frequency=function(t,e){if(!(this instanceof s["a"].Frequency))return new s["a"].Frequency(t,e);s["a"].TimeBase.call(this,t,e)},s["a"].extend(s["a"].Frequency,s["a"].TimeBase),s["a"].Frequency.prototype._expressions=Object.assign({},s["a"].TimeBase.prototype._expressions,{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method:function(t){return"midi"===this._defaultUnits?t:s["a"].Frequency.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(t,e){var i=r[t.toLowerCase()],n=i+12*(parseInt(e)+1);return"midi"===this._defaultUnits?n:s["a"].Frequency.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,i){var n=1;return t&&"0"!==t&&(n*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(n*=this._beatsToUnits(parseFloat(e))),i&&"0"!==i&&(n*=this._beatsToUnits(parseFloat(i)/4)),n}}}),s["a"].Frequency.prototype.transpose=function(t){return new this.constructor(this.valueOf()*s["a"].intervalToFrequencyRatio(t))},s["a"].Frequency.prototype.harmonize=function(t){return t.map(function(t){return this.transpose(t)}.bind(this))},s["a"].Frequency.prototype.toMidi=function(){return s["a"].Frequency.ftom(this.valueOf())},s["a"].Frequency.prototype.toNote=function(){var t=this.toFrequency(),e=Math.log2(t/s["a"].Frequency.A4),i=Math.round(12*e)+57,n=Math.floor(i/12);n<0&&(i+=-12*n);var o=u[i%12];return o+n.toString()},s["a"].Frequency.prototype.toSeconds=function(){return 1/s["a"].TimeBase.prototype.toSeconds.call(this)},s["a"].Frequency.prototype.toFrequency=function(){return s["a"].TimeBase.prototype.toFrequency.call(this)},s["a"].Frequency.prototype.toTicks=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*s["a"].Transport.PPQ)},s["a"].Frequency.prototype._noArg=function(){return 0},s["a"].Frequency.prototype._frequencyToUnits=function(t){return t},s["a"].Frequency.prototype._ticksToUnits=function(t){return 1/(60*t/(s["a"].Transport.bpm.value*s["a"].Transport.PPQ))},s["a"].Frequency.prototype._beatsToUnits=function(t){return 1/s["a"].TimeBase.prototype._beatsToUnits.call(this,t)},s["a"].Frequency.prototype._secondsToUnits=function(t){return 1/t},s["a"].Frequency.prototype._defaultUnits="hz";var r={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},u=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];s["a"].Frequency.A4=440,s["a"].Frequency.mtof=function(t){return s["a"].Frequency.A4*Math.pow(2,(t-69)/12)},s["a"].Frequency.ftom=function(t){return 69+Math.round(12*Math.log2(t/s["a"].Frequency.A4))};s["a"].Frequency;s["a"].Time=function(t,e){if(!(this instanceof s["a"].Time))return new s["a"].Time(t,e);s["a"].TimeBase.call(this,t,e)},s["a"].extend(s["a"].Time,s["a"].TimeBase),s["a"].Time.prototype._expressions=Object.assign({},s["a"].TimeBase.prototype._expressions,{quantize:{regexp:/^@(.+)/,method:function(t){if(s["a"].Transport){var e=new this.constructor(t);return this._secondsToUnits(s["a"].Transport.nextSubdivision(e))}return 0}},now:{regexp:/^\+(.+)/,method:function(t){return this._now()+new this.constructor(t)}}}),s["a"].Time.prototype.quantize=function(t,e){e=s["a"].defaultArg(e,1);var i=new this.constructor(t),n=this.valueOf(),o=Math.round(n/i),a=o*i,r=a-n;return n+r*e},s["a"].Time.prototype.toNotation=function(){for(var t=this.toSeconds(),e=["1m"],i=1;i<8;i++){var n=Math.pow(2,i);e.push(n+"n."),e.push(n+"n"),e.push(n+"t")}e.push("0");var o=e[0],a=s["a"].Time(e[0]).toSeconds();return e.forEach((function(e){var i=s["a"].Time(e).toSeconds();Math.abs(i-t)<Math.abs(a-t)&&(o=e,a=i)})),o},s["a"].Time.prototype.toBarsBeatsSixteenths=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;e=parseFloat(e.toFixed(4));var i=Math.floor(e/this._getTimeSignature()),n=e%1*4;e=Math.floor(e)%this._getTimeSignature(),n=n.toString(),n.length>3&&(n=parseFloat(parseFloat(n).toFixed(3)));var o=[i,e,n];return o.join(":")},s["a"].Time.prototype.toTicks=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())},s["a"].Time.prototype.toSeconds=function(){return this.valueOf()},s["a"].Time.prototype.toMidi=function(){return s["a"].Frequency.ftom(this.toFrequency())};s["a"].Time;s["a"].TransportTime=function(t,e){if(!(this instanceof s["a"].TransportTime))return new s["a"].TransportTime(t,e);s["a"].Time.call(this,t,e)},s["a"].extend(s["a"].TransportTime,s["a"].Time),s["a"].TransportTime.prototype._now=function(){return s["a"].Transport.seconds};s["a"].TransportTime;s["a"].Emitter=function(){s["a"].call(this),this._events={}},s["a"].extend(s["a"].Emitter),s["a"].Emitter.prototype.on=function(t,e){for(var i=t.split(/\W+/),n=0;n<i.length;n++){var o=i[n];this._events.hasOwnProperty(o)||(this._events[o]=[]),this._events[o].push(e)}return this},s["a"].Emitter.prototype.once=function(t,e){var i=function(){e.apply(this,arguments),this.off(t,i)}.bind(this);return this.on(t,i),this},s["a"].Emitter.prototype.off=function(t,e){for(var i=t.split(/\W+/),n=0;n<i.length;n++)if(t=i[n],this._events.hasOwnProperty(t))if(s["a"].isUndef(e))this._events[t]=[];else for(var o=this._events[t],a=0;a<o.length;a++)o[a]===e&&o.splice(a,1);return this},s["a"].Emitter.prototype.emit=function(t){if(this._events){var e=Array.apply(null,arguments).slice(1);if(this._events.hasOwnProperty(t))for(var i=this._events[t].slice(0),n=0,o=i.length;n<o;n++)i[n].apply(this,e)}return this},s["a"].Emitter.mixin=function(t){var e=["on","once","off","emit"];t._events={};for(var i=0;i<e.length;i++){var n=e[i],o=s["a"].Emitter.prototype[n];t[n]=o}return s["a"].Emitter},s["a"].Emitter.prototype.dispose=function(){return s["a"].prototype.dispose.call(this),this._events=null,this};s["a"].Emitter;s["a"].Timeline=function(){var t=s["a"].defaults(arguments,["memory"],s["a"].Timeline);s["a"].call(this),this._timeline=[],this.memory=t.memory},s["a"].extend(s["a"].Timeline),s["a"].Timeline.defaults={memory:1/0},Object.defineProperty(s["a"].Timeline.prototype,"length",{get:function(){return this._timeline.length}}),s["a"].Timeline.prototype.add=function(t){if(s["a"].isUndef(t.time))throw new Error("Tone.Timeline: events must have a time attribute");t.time=t.time.valueOf();var e=this._search(t.time);if(this._timeline.splice(e+1,0,t),this.length>this.memory){var i=this.length-this.memory;this._timeline.splice(0,i)}return this},s["a"].Timeline.prototype.remove=function(t){var e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this},s["a"].Timeline.prototype.get=function(t,e){e=s["a"].defaultArg(e,"time");var i=this._search(t,e);return-1!==i?this._timeline[i]:null},s["a"].Timeline.prototype.peek=function(){return this._timeline[0]},s["a"].Timeline.prototype.shift=function(){return this._timeline.shift()},s["a"].Timeline.prototype.getAfter=function(t,e){e=s["a"].defaultArg(e,"time");var i=this._search(t,e);return i+1<this._timeline.length?this._timeline[i+1]:null},s["a"].Timeline.prototype.getBefore=function(t,e){e=s["a"].defaultArg(e,"time");var i=this._timeline.length;if(i>0&&this._timeline[i-1][e]<t)return this._timeline[i-1];var n=this._search(t,e);return n-1>=0?this._timeline[n-1]:null},s["a"].Timeline.prototype.cancel=function(t){if(this._timeline.length>1){var e=this._search(t);if(e>=0)if(this._timeline[e].time===t){for(var i=e;i>=0;i--){if(this._timeline[i].time!==t)break;e=i}this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&this._timeline[0].time>=t&&(this._timeline=[]);return this},s["a"].Timeline.prototype.cancelBefore=function(t){var e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this},s["a"].Timeline.prototype.previousEvent=function(t){var e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null},s["a"].Timeline.prototype._search=function(t,e){if(0===this._timeline.length)return-1;e=s["a"].defaultArg(e,"time");var i=0,n=this._timeline.length,o=n;if(n>0&&this._timeline[n-1][e]<=t)return n-1;while(i<o){var a=Math.floor(i+(o-i)/2),r=this._timeline[a],u=this._timeline[a+1];if(r[e]===t){for(var c=a;c<this._timeline.length;c++){var h=this._timeline[c];h[e]===t&&(a=c)}return a}if(r[e]<t&&u[e]>t)return a;r[e]>t?o=a:i=a+1}return-1},s["a"].Timeline.prototype._iterate=function(t,e,i){e=s["a"].defaultArg(e,0),i=s["a"].defaultArg(i,this._timeline.length-1),this._timeline.slice(e,i+1).forEach(function(e){t.call(this,e)}.bind(this))},s["a"].Timeline.prototype.forEach=function(t){return this._iterate(t),this},s["a"].Timeline.prototype.forEachBefore=function(t,e){var i=this._search(t);return-1!==i&&this._iterate(e,0,i),this},s["a"].Timeline.prototype.forEachAfter=function(t,e){var i=this._search(t);return this._iterate(e,i+1),this},s["a"].Timeline.prototype.forEachBetween=function(t,e,i){var n=this._search(t),o=this._search(e);return-1!==n&&-1!==o?(this._timeline[n].time!==t&&(n+=1),this._timeline[o].time===e&&(o-=1),this._iterate(i,n,o)):-1===n&&this._iterate(i,0,o),this},s["a"].Timeline.prototype.forEachFrom=function(t,e){var i=this._search(t);while(i>=0&&this._timeline[i].time>=t)i--;return this._iterate(e,i+1),this},s["a"].Timeline.prototype.forEachAtTime=function(t,e){var i=this._search(t);return-1!==i&&this._iterate((function(i){i.time===t&&e.call(this,i)}),0,i),this},s["a"].Timeline.prototype.dispose=function(){return s["a"].prototype.dispose.call(this),this._timeline=null,this};s["a"].Timeline;if(s["a"].supported){!s["a"].global.hasOwnProperty("OfflineAudioContext")&&s["a"].global.hasOwnProperty("webkitOfflineAudioContext")&&(s["a"].global.OfflineAudioContext=s["a"].global.webkitOfflineAudioContext);var c=new OfflineAudioContext(1,1,44100),h=c.startRendering();h&&s["a"].isFunction(h.then)||(OfflineAudioContext.prototype._native_startRendering=OfflineAudioContext.prototype.startRendering,OfflineAudioContext.prototype.startRendering=function(){return new Promise(function(t){this.oncomplete=function(e){t(e.renderedBuffer)},this._native_startRendering()}.bind(this))})}if(s["a"].supported){!s["a"].global.hasOwnProperty("AudioContext")&&s["a"].global.hasOwnProperty("webkitAudioContext")&&(s["a"].global.AudioContext=s["a"].global.webkitAudioContext),AudioContext.prototype.close||(AudioContext.prototype.close=function(){return s["a"].isFunction(this.suspend)&&this.suspend(),Promise.resolve()}),AudioContext.prototype.resume||(AudioContext.prototype.resume=function(){var t=this.createBuffer(1,1,this.sampleRate),e=this.createBufferSource();return e.buffer=t,e.connect(this.destination),e.start(0),Promise.resolve()}),!AudioContext.prototype.createGain&&AudioContext.prototype.createGainNode&&(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),!AudioContext.prototype.createDelay&&AudioContext.prototype.createDelayNode&&(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode);var l=!1,p=new OfflineAudioContext(1,1,44100),f=new Uint32Array([1179011410,48,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,8,0,0,0,0]).buffer;try{var d=p.decodeAudioData(f);d&&s["a"].isFunction(d.then)&&(l=!0)}catch(q){l=!1}l||(AudioContext.prototype._native_decodeAudioData=AudioContext.prototype.decodeAudioData,AudioContext.prototype.decodeAudioData=function(t){return new Promise(function(e,i){this._native_decodeAudioData(t,e,i)}.bind(this))})}var m=["baseLatency","destination","currentTime","sampleRate","listener","state"],_=["suspend","close","resume","getOutputTimestamp","createMediaElementSource","createMediaStreamSource","createMediaStreamDestination","createBuffer","decodeAudioData","createBufferSource","createConstantSource","createGain","createDelay","createBiquadFilter","createIIRFilter","createWaveShaper","createPanner","createConvolver","createDynamicsCompressor","createAnalyser","createScriptProcessor","createStereoPanner","createOscillator","createPeriodicWave","createChannelSplitter","createChannelMerger","audioWorklet"];s["a"].Context=function(){s["a"].Emitter.call(this);var t=s["a"].defaults(arguments,["context"],s["a"].Context);if(!t.context&&(t.context=new s["a"].global.AudioContext,!t.context))throw new Error("could not create AudioContext. Possibly too many AudioContexts running already.");this._context=t.context;while(this._context.rawContext)this._context=this._context.rawContext;m.forEach(function(t){this._defineProperty(this._context,t)}.bind(this)),_.forEach(function(t){this._defineMethod(this._context,t)}.bind(this)),this._latencyHint=t.latencyHint,this._constants={},this.lookAhead=t.lookAhead,this._computedUpdateInterval=0,this._ticker=new y(this.emit.bind(this,"tick"),t.clockSource,t.updateInterval),this._timeouts=new s["a"].Timeline,this._timeoutIds=0,this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=function(t){this.emit("statechange",t)}.bind(this)},s["a"].extend(s["a"].Context,s["a"].Emitter),s["a"].Emitter.mixin(s["a"].Context),s["a"].Context.defaults={clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.03},s["a"].Context.prototype.isContext=!0,s["a"].Context.prototype._defineProperty=function(t,e){s["a"].isUndef(this[e])&&Object.defineProperty(this,e,{get:function(){return t[e]},set:function(i){t[e]=i}})},s["a"].Context.prototype._defineMethod=function(t,e){s["a"].isUndef(this[e])&&Object.defineProperty(this,e,{get:function(){return t[e].bind(t)}})},s["a"].Context.prototype.now=function(){return this._context.currentTime+this.lookAhead},Object.defineProperty(s["a"].Context.prototype,"destination",{get:function(){return this.master?this.master:this._context.destination}}),s["a"].Context.prototype.resume=function(){return"suspended"===this._context.state&&this._context instanceof AudioContext?this._context.resume():Promise.resolve()},s["a"].Context.prototype.close=function(){var t=Promise.resolve();return this!==s["a"].global.TONE_AUDIO_CONTEXT&&(t=this.rawContext.close()),t.then(function(){s["a"].Context.emit("close",this)}.bind(this))},s["a"].Context.prototype.getConstant=function(t){if(this._constants[t])return this._constants[t];for(var e=this._context.createBuffer(1,128,this._context.sampleRate),i=e.getChannelData(0),n=0;n<i.length;n++)i[n]=t;var o=this._context.createBufferSource();return o.channelCount=1,o.channelCountMode="explicit",o.buffer=e,o.loop=!0,o.start(0),this._constants[t]=o,o},s["a"].Context.prototype._timeoutLoop=function(){var t=this.now();while(this._timeouts&&this._timeouts.length&&this._timeouts.peek().time<=t)this._timeouts.shift().callback()},s["a"].Context.prototype.setTimeout=function(t,e){this._timeoutIds++;var i=this.now();return this._timeouts.add({callback:t,time:i+e,id:this._timeoutIds}),this._timeoutIds},s["a"].Context.prototype.clearTimeout=function(t){return this._timeouts.forEach((function(e){e.id===t&&this.remove(e)})),this},Object.defineProperty(s["a"].Context.prototype,"updateInterval",{get:function(){return this._ticker.updateInterval},set:function(t){this._ticker.updateInterval=t}}),Object.defineProperty(s["a"].Context.prototype,"rawContext",{get:function(){return this._context}}),Object.defineProperty(s["a"].Context.prototype,"clockSource",{get:function(){return this._ticker.type},set:function(t){this._ticker.type=t}}),Object.defineProperty(s["a"].Context.prototype,"latencyHint",{get:function(){return this._latencyHint},set:function(t){var e=t;if(this._latencyHint=t,s["a"].isString(t))switch(t){case"interactive":e=.1,this._context.latencyHint=t;break;case"playback":e=.8,this._context.latencyHint=t;break;case"balanced":e=.25,this._context.latencyHint=t;break;case"fastest":this._context.latencyHint="interactive",e=.01;break}this.lookAhead=e,this.updateInterval=e/3}}),s["a"].Context.prototype.dispose=function(){return this.close().then(function(){for(var t in s["a"].Emitter.prototype.dispose.call(this),this._ticker.dispose(),this._ticker=null,this._timeouts.dispose(),this._timeouts=null,this._constants)this._constants[t].disconnect();this._constants=null}.bind(this))};var y=function(t,e,i){this._type=e,this._updateInterval=i,this._callback=s["a"].defaultArg(t,s["a"].noOp),this._createClock()};if(y.Type={Worker:"worker",Timeout:"timeout",Offline:"offline"},y.prototype._createWorker=function(){s["a"].global.URL=s["a"].global.URL||s["a"].global.webkitURL;var t=new Blob(["var timeoutTime = "+(1e3*this._updateInterval).toFixed(1)+";self.onmessage = function(msg){\ttimeoutTime = parseInt(msg.data);};function tick(){\tsetTimeout(tick, timeoutTime);\tself.postMessage('tick');}tick();"]),e=URL.createObjectURL(t),i=new Worker(e);i.onmessage=this._callback.bind(this),this._worker=i},y.prototype._createTimeout=function(){this._timeout=setTimeout(function(){this._createTimeout(),this._callback()}.bind(this),1e3*this._updateInterval)},y.prototype._createClock=function(){if(this._type===y.Type.Worker)try{this._createWorker()}catch(q){this._type=y.Type.Timeout,this._createClock()}else this._type===y.Type.Timeout&&this._createTimeout()},Object.defineProperty(y.prototype,"updateInterval",{get:function(){return this._updateInterval},set:function(t){this._updateInterval=Math.max(t,128/44100),this._type===y.Type.Worker&&this._worker.postMessage(Math.max(1e3*t,1))}}),Object.defineProperty(y.prototype,"type",{get:function(){return this._type},set:function(t){this._disposeClock(),this._type=t,this._createClock()}}),y.prototype._disposeClock=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this._worker&&(this._worker.terminate(),this._worker.onmessage=null,this._worker=null)},y.prototype.dispose=function(){this._disposeClock(),this._callback=null},s["a"].supported&&!s["a"].initialized){if(s["a"].global.TONE_AUDIO_CONTEXT||(s["a"].global.TONE_AUDIO_CONTEXT=new s["a"].Context),s["a"].context=s["a"].global.TONE_AUDIO_CONTEXT,!s["a"].global.TONE_SILENCE_LOGGING){var g="v";"dev"===s["a"].version&&(g="");var v=" * Tone.js "+g+s["a"].version+" * ";console.log("%c"+v,"background: #000; color: #fff")}}else s["a"].supported||s["a"].global.TONE_SILENCE_LOGGING||console.warn("This browser does not support Tone.js");s["a"].Context;s["a"].Type={Default:"number",Time:"time",Frequency:"frequency",TransportTime:"transportTime",Ticks:"ticks",NormalRange:"normalRange",AudioRange:"audioRange",Decibels:"db",Interval:"interval",BPM:"bpm",Positive:"positive",Gain:"gain",Cents:"cents",Degrees:"degrees",MIDI:"midi",BarsBeatsSixteenths:"barsBeatsSixteenths",Samples:"samples",Hertz:"hertz",Note:"note",Milliseconds:"milliseconds",Seconds:"seconds",Notation:"notation"},s["a"].prototype.toSeconds=function(t){return s["a"].isNumber(t)?t:s["a"].isUndef(t)?this.now():s["a"].isString(t)||s["a"].isObject(t)?new s["a"].Time(t).toSeconds():t instanceof s["a"].TimeBase?t.toSeconds():void 0},s["a"].prototype.toFrequency=function(t){return s["a"].isNumber(t)?t:s["a"].isString(t)||s["a"].isUndef(t)||s["a"].isObject(t)?new s["a"].Frequency(t).valueOf():t instanceof s["a"].TimeBase?t.toFrequency():void 0},s["a"].prototype.toTicks=function(t){return s["a"].isNumber(t)||s["a"].isString(t)||s["a"].isObject(t)?new s["a"].TransportTime(t).toTicks():s["a"].isUndef(t)?s["a"].Transport.ticks:t instanceof s["a"].TimeBase?t.toTicks():void 0};s["a"];if(s["a"].supported){var T=new OfflineAudioContext(2,1,44100),S=T.createGain(),b=T.createGain();if(S.connect(b)!==b){var A=AudioNode.prototype.connect;AudioNode.prototype.connect=function(){return A.apply(this,arguments),arguments[0]}}}s["a"].AudioNode=function(){s["a"].call(this);var t=s["a"].defaults(arguments,["context"],{context:s["a"].context});this._context=t.context},s["a"].extend(s["a"].AudioNode),Object.defineProperty(s["a"].AudioNode.prototype,"context",{get:function(){return this._context}}),s["a"].AudioNode.prototype.createInsOuts=function(t,e){1===t?this.input=this.context.createGain():t>1&&(this.input=new Array(t)),1===e?this.output=this.context.createGain():e>1&&(this.output=new Array(e))},Object.defineProperty(s["a"].AudioNode.prototype,"channelCount",{get:function(){return this.output.channelCount},set:function(t){return this.output.channelCount=t}}),Object.defineProperty(s["a"].AudioNode.prototype,"channelCountMode",{get:function(){return this.output.channelCountMode},set:function(t){return this.output.channelCountMode=t}}),Object.defineProperty(s["a"].AudioNode.prototype,"channelInterpretation",{get:function(){return this.output.channelInterpretation},set:function(t){return this.output.channelInterpretation=t}}),Object.defineProperty(s["a"].AudioNode.prototype,"numberOfInputs",{get:function(){return this.input?s["a"].isArray(this.input)?this.input.length:1:0}}),Object.defineProperty(s["a"].AudioNode.prototype,"numberOfOutputs",{get:function(){return this.output?s["a"].isArray(this.output)?this.output.length:1:0}}),s["a"].AudioNode.prototype.connect=function(t,e,i){return s["a"].isArray(this.output)?(e=s["a"].defaultArg(e,0),this.output[e].connect(t,0,i)):s["a"].connect(this.output,t,e,i),this},s["a"].AudioNode.prototype.disconnect=function(t,e,i){return s["a"].isArray(this.output)?(e=s["a"].defaultArg(e,0),this.output[e].disconnect(t,0,i)):s["a"].disconnect(this.output,t,e,i),this},s["a"].AudioNode.prototype.chain=function(){var t=Array.from(arguments);return t.unshift(this),s["a"].connectSeries.apply(void 0,t),this},s["a"].AudioNode.prototype.fan=function(){for(var t=0;t<arguments.length;t++)this.connect(arguments[t]);return this},s["a"].AudioNode.prototype.dispose=function(){return s["a"].isDefined(this.input)&&(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null),s["a"].isDefined(this.output)&&(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null),this._context=null,this};s["a"].AudioNode;s["a"].Param=function(){var t=s["a"].defaults(arguments,["param","units","convert"],s["a"].Param);s["a"].AudioNode.call(this,t),this._param=this.input=t.param,this.units=t.units,this.convert=t.convert,this.overridden=!1,this._events=new s["a"].Timeline(1e3),s["a"].isDefined(t.value)&&this._param&&this.setValueAtTime(t.value,0)},s["a"].extend(s["a"].Param,s["a"].AudioNode),s["a"].Param.defaults={units:s["a"].Type.Default,convert:!0,param:void 0},Object.defineProperty(s["a"].Param.prototype,"value",{get:function(){var t=this.now();return this._toUnits(this.getValueAtTime(t))},set:function(t){this._initialValue=this._fromUnits(t),this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}}),Object.defineProperty(s["a"].Param.prototype,"minValue",{get:function(){return this.units===s["a"].Type.Time||this.units===s["a"].Type.Frequency||this.units===s["a"].Type.NormalRange||this.units===s["a"].Type.Positive||this.units===s["a"].Type.BPM?0:this.units===s["a"].Type.AudioRange?-1:this.units===s["a"].Type.Decibels?-1/0:this._param.minValue}}),Object.defineProperty(s["a"].Param.prototype,"maxValue",{get:function(){return this.units===s["a"].Type.NormalRange||this.units===s["a"].Type.AudioRange?1:this._param.maxValue}}),s["a"].Param.prototype._fromUnits=function(t){if(!this.convert&&!s["a"].isUndef(this.convert)||this.overridden)return t;switch(this.units){case s["a"].Type.Time:return this.toSeconds(t);case s["a"].Type.Frequency:return this.toFrequency(t);case s["a"].Type.Decibels:return s["a"].dbToGain(t);case s["a"].Type.NormalRange:return Math.min(Math.max(t,0),1);case s["a"].Type.AudioRange:return Math.min(Math.max(t,-1),1);case s["a"].Type.Positive:return Math.max(t,0);default:return t}},s["a"].Param.prototype._toUnits=function(t){if(!this.convert&&!s["a"].isUndef(this.convert))return t;switch(this.units){case s["a"].Type.Decibels:return s["a"].gainToDb(t);default:return t}},s["a"].Param.prototype._minOutput=1e-5,s["a"].Param.AutomationType={Linear:"linearRampToValueAtTime",Exponential:"exponentialRampToValueAtTime",Target:"setTargetAtTime",SetValue:"setValueAtTime",Cancel:"cancelScheduledValues"},s["a"].Param.prototype.setValueAtTime=function(t,e){return e=this.toSeconds(e),t=this._fromUnits(t),this._events.add({type:s["a"].Param.AutomationType.SetValue,value:t,time:e}),this.log(s["a"].Param.AutomationType.SetValue,t,e),this._param.setValueAtTime(t,e),this},s["a"].Param.prototype.getValueAtTime=function(t){t=this.toSeconds(t);var e=this._events.getAfter(t),i=this._events.get(t),n=s["a"].defaultArg(this._initialValue,this._param.defaultValue),o=n;if(null===i)o=n;else if(i.type===s["a"].Param.AutomationType.Target){var a,r=this._events.getBefore(i.time);a=null===r?n:r.value,o=this._exponentialApproach(i.time,a,i.value,i.constant,t)}else o=null===e?i.value:e.type===s["a"].Param.AutomationType.Linear?this._linearInterpolate(i.time,i.value,e.time,e.value,t):e.type===s["a"].Param.AutomationType.Exponential?this._exponentialInterpolate(i.time,i.value,e.time,e.value,t):i.value;return o},s["a"].Param.prototype.setRampPoint=function(t){t=this.toSeconds(t);var e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===e&&(e=this._minOutput),this.setValueAtTime(this._toUnits(e),t),this},s["a"].Param.prototype.linearRampToValueAtTime=function(t,e){return t=this._fromUnits(t),e=this.toSeconds(e),this._events.add({type:s["a"].Param.AutomationType.Linear,value:t,time:e}),this.log(s["a"].Param.AutomationType.Linear,t,e),this._param.linearRampToValueAtTime(t,e),this},s["a"].Param.prototype.exponentialRampToValueAtTime=function(t,e){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),e=this.toSeconds(e),this._events.add({type:s["a"].Param.AutomationType.Exponential,time:e,value:t}),this.log(s["a"].Param.AutomationType.Exponential,t,e),this._param.exponentialRampToValueAtTime(t,e),this},s["a"].Param.prototype.exponentialRampTo=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(t,i+this.toSeconds(e)),this},s["a"].Param.prototype.linearRampTo=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(t,i+this.toSeconds(e)),this},s["a"].Param.prototype.targetRampTo=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialApproachValueAtTime(t,i,e),this},s["a"].Param.prototype.exponentialApproachValueAtTime=function(t,e,i){var n=Math.log(this.toSeconds(i)+1)/Math.log(200);return e=this.toSeconds(e),this.setTargetAtTime(t,e,n),this.cancelAndHoldAtTime(e+.9*i),this.linearRampToValueAtTime(t,e+i),this},s["a"].Param.prototype.setTargetAtTime=function(t,e,i){if(t=this._fromUnits(t),i<=0)throw new Error("timeConstant must be greater than 0");return e=this.toSeconds(e),this._events.add({type:s["a"].Param.AutomationType.Target,value:t,time:e,constant:i}),this.log(s["a"].Param.AutomationType.Target,t,e,i),this._param.setTargetAtTime(t,e,i),this},s["a"].Param.prototype.setValueCurveAtTime=function(t,e,i,n){n=s["a"].defaultArg(n,1),i=this.toSeconds(i),e=this.toSeconds(e),this.setValueAtTime(t[0]*n,e);for(var o=i/(t.length-1),a=1;a<t.length;a++)this.linearRampToValueAtTime(t[a]*n,e+a*o);return this},s["a"].Param.prototype.cancelScheduledValues=function(t){return t=this.toSeconds(t),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(s["a"].Param.AutomationType.Cancel,t),this},s["a"].Param.prototype.cancelAndHoldAtTime=function(t){t=this.toSeconds(t);var e=this.getValueAtTime(t);this.log("cancelAndHoldAtTime",t,"value="+e),this._param.cancelScheduledValues(t);var i=this._events.get(t),n=this._events.getAfter(t);return i&&i.time===t?n?this._events.cancel(n.time):this._events.cancel(t+this.sampleTime):n&&(this._events.cancel(n.time),n.type===s["a"].Param.AutomationType.Linear?this.linearRampToValueAtTime(e,t):n.type===s["a"].Param.AutomationType.Exponential&&this.exponentialRampToValueAtTime(e,t)),this._events.add({type:s["a"].Param.AutomationType.SetValue,value:e,time:t}),this._param.setValueAtTime(e,t),this},s["a"].Param.prototype.rampTo=function(t,e,i){return e=s["a"].defaultArg(e,.1),this.units===s["a"].Type.Frequency||this.units===s["a"].Type.BPM||this.units===s["a"].Type.Decibels?this.exponentialRampTo(t,e,i):this.linearRampTo(t,e,i),this},s["a"].Param.prototype._exponentialApproach=function(t,e,i,n,o){return i+(e-i)*Math.exp(-(o-t)/n)},s["a"].Param.prototype._linearInterpolate=function(t,e,i,n,o){return e+(o-t)/(i-t)*(n-e)},s["a"].Param.prototype._exponentialInterpolate=function(t,e,i,n,o){return e*Math.pow(n/e,(o-t)/(i-t))},s["a"].Param.prototype.dispose=function(){return s["a"].AudioNode.prototype.dispose.call(this),this._param=null,this._events=null,this};s["a"].Param;s["a"].SignalBase=function(){s["a"].AudioNode.call(this)},s["a"].extend(s["a"].SignalBase,s["a"].AudioNode),s["a"].SignalBase.prototype.connect=function(t,e,i){return s["a"].Signal&&s["a"].Signal===t.constructor||s["a"].Param&&s["a"].Param===t.constructor?(t._param.cancelScheduledValues(0),t._param.setValueAtTime(0,0),t.overridden=!0):t instanceof AudioParam&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0)),s["a"].AudioNode.prototype.connect.call(this,t,e,i),this};s["a"].SignalBase;s["a"].Gain=function(){var t=s["a"].defaults(arguments,["gain","units"],s["a"].Gain);s["a"].AudioNode.call(this,t),this.input=this.output=this._gainNode=this.context.createGain(),this.gain=new s["a"].Param({param:this._gainNode.gain,units:t.units,value:t.gain,convert:t.convert}),this._readOnly("gain")},s["a"].extend(s["a"].Gain,s["a"].AudioNode),s["a"].Gain.defaults={gain:1,convert:!0},s["a"].Gain.prototype.dispose=function(){s["a"].AudioNode.prototype.dispose.call(this),this._gainNode.disconnect(),this._gainNode=null,this._writable("gain"),this.gain.dispose(),this.gain=null};s["a"].Gain;if(s["a"].supported&&!s["a"].global.AudioContext.prototype.createConstantSource){var k=function(t){this.context=t;for(var e=t.createBuffer(1,128,t.sampleRate),i=e.getChannelData(0),n=0;n<i.length;n++)i[n]=1;this._bufferSource=t.createBufferSource(),this._bufferSource.channelCount=1,this._bufferSource.channelCountMode="explicit",this._bufferSource.buffer=e,this._bufferSource.loop=!0;var o=this._output=t.createGain();this.offset=o.gain,this._bufferSource.connect(o)};k.prototype.start=function(t){return this._bufferSource.start(t),this},k.prototype.stop=function(t){return this._bufferSource.stop(t),this},k.prototype.connect=function(){return this._output.connect.apply(this._output,arguments),this},k.prototype.disconnect=function(){return this._output.disconnect.apply(this._output,arguments),this},AudioContext.prototype.createConstantSource=function(){return new k(this)},s["a"].Context.prototype.createConstantSource=function(){return new k(this)}}s["a"].Signal=function(){var t=s["a"].defaults(arguments,["value","units"],s["a"].Signal);s["a"].Param.call(this,t),this._constantSource=this.context.createConstantSource(),this._constantSource.start(0),this._param=this._constantSource.offset,this.value=t.value,this.output=this._constantSource,this.input=this._param=this.output.offset},s["a"].extend(s["a"].Signal,s["a"].Param),s["a"].Signal.defaults={value:0,units:s["a"].Type.Default,convert:!0},s["a"].Signal.prototype.connect=s["a"].SignalBase.prototype.connect,s["a"].Signal.prototype.disconnect=s["a"].SignalBase.prototype.disconnect,s["a"].Signal.prototype.getValueAtTime=function(t){return this._param.getValueAtTime?this._param.getValueAtTime(t):s["a"].Param.prototype.getValueAtTime.call(this,t)},s["a"].Signal.prototype.dispose=function(){return s["a"].Param.prototype.dispose.call(this),this._constantSource.stop(),this._constantSource.disconnect(),this._constantSource=null,this};s["a"].Signal;s["a"].Volume=function(){var t=s["a"].defaults(arguments,["volume"],s["a"].Volume);s["a"].AudioNode.call(this,t),this.output=this.input=new s["a"].Gain(t.volume,s["a"].Type.Decibels),this._unmutedVolume=t.volume,this.volume=this.output.gain,this._readOnly("volume"),this.mute=t.mute},s["a"].extend(s["a"].Volume,s["a"].AudioNode),s["a"].Volume.defaults={volume:0,mute:!1},Object.defineProperty(s["a"].Volume.prototype,"mute",{get:function(){return this.volume.value===-1/0},set:function(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}}),s["a"].Volume.prototype.dispose=function(){return this.input.dispose(),s["a"].AudioNode.prototype.dispose.call(this),this._writable("volume"),this.volume.dispose(),this.volume=null,this};s["a"].Volume;s["a"].Master=function(){s["a"].AudioNode.call(this),s["a"].getContext(function(){this.createInsOuts(1,0),this._volume=this.output=new s["a"].Volume,this.volume=this._volume.volume,this._readOnly("volume"),s["a"].connectSeries(this.input,this.output,this.context.destination),this.context.master=this}.bind(this))},s["a"].extend(s["a"].Master,s["a"].AudioNode),s["a"].Master.defaults={volume:0,mute:!1},s["a"].Master.prototype.isMaster=!0,Object.defineProperty(s["a"].Master.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),s["a"].Master.prototype.chain=function(){this.input.disconnect();var t=Array.from(arguments);t.unshift(this.input),t.push(this.output),s["a"].connectSeries.apply(void 0,t)},s["a"].Master.prototype.dispose=function(){s["a"].AudioNode.prototype.dispose.call(this),this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null},s["a"].AudioNode.prototype.toMaster=function(){return this.connect(this.context.master),this};var x=s["a"].Master;s["a"].Master=new x,s["a"].Context.on("init",(function(t){t.master&&t.master.isMaster?s["a"].Master=t.master:s["a"].Master=new x})),s["a"].Context.on("close",(function(t){t.master&&t.master.isMaster&&t.master.dispose()}));s["a"].Master;s["a"].Instrument=function(t){t=s["a"].defaultArg(t,s["a"].Instrument.defaults),s["a"].AudioNode.call(this),this._volume=this.output=new s["a"].Volume(t.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._scheduledEvents=[]},s["a"].extend(s["a"].Instrument,s["a"].AudioNode),s["a"].Instrument.defaults={volume:0},s["a"].Instrument.prototype.triggerAttack=s["a"].noOp,s["a"].Instrument.prototype.triggerRelease=s["a"].noOp,s["a"].Instrument.prototype.sync=function(){return this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this},s["a"].Instrument.prototype._syncMethod=function(t,e){var i=this["_original_"+t]=this[t];this[t]=function(){var t=Array.prototype.slice.call(arguments),n=t[e],o=s["a"].Transport.schedule(function(n){t[e]=n,i.apply(this,t)}.bind(this),n);this._scheduledEvents.push(o)}.bind(this)},s["a"].Instrument.prototype.unsync=function(){return this._scheduledEvents.forEach((function(t){s["a"].Transport.clear(t)})),this._scheduledEvents=[],this._original_triggerAttack&&(this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this},s["a"].Instrument.prototype.triggerAttackRelease=function(t,e,i,n){return i=this.toSeconds(i),e=this.toSeconds(e),this.triggerAttack(t,i,n),this.triggerRelease(i+e),this},s["a"].Instrument.prototype.dispose=function(){return s["a"].AudioNode.prototype.dispose.call(this),this._volume.dispose(),this._volume=null,this._writable(["volume"]),this.volume=null,this.unsync(),this._scheduledEvents=null,this};s["a"].Instrument;s["a"].supported&&(AudioBuffer.prototype.copyToChannel||(AudioBuffer.prototype.copyToChannel=function(t,e,i){var n=this.getChannelData(e);i=i||0;for(var o=0;o<n.length;o++)n[o+i]=t[o]},AudioBuffer.prototype.copyFromChannel=function(t,e,i){var n=this.getChannelData(e);i=i||0;for(var o=0;o<t.length;o++)t[o]=n[o+i]})),s["a"].Buffer=function(){var t=s["a"].defaults(arguments,["url","onload","onerror"],s["a"].Buffer);s["a"].call(this),this._buffer=null,this._reversed=t.reverse,this._xhr=null,this.onload=s["a"].noOp,t.url instanceof AudioBuffer||t.url instanceof s["a"].Buffer?(this.set(t.url),this.loaded||(this.onload=t.onload)):s["a"].isString(t.url)&&this.load(t.url).then(t.onload).catch(t.onerror)},s["a"].extend(s["a"].Buffer),s["a"].Buffer.defaults={url:void 0,reverse:!1,onload:s["a"].noOp,onerror:s["a"].noOp},s["a"].Buffer.prototype.set=function(t){return t instanceof s["a"].Buffer?t.loaded?this._buffer=t.get():t.onload=function(){this.set(t),this.onload(this)}.bind(this):this._buffer=t,this._reversed&&this._reverse(),this},s["a"].Buffer.prototype.get=function(){return this._buffer},s["a"].Buffer.prototype.load=function(t,e,i){var n=new Promise(function(n,o){this._xhr=s["a"].Buffer.load(t,function(t){this._xhr=null,this.set(t),n(this),this.onload(this),e&&e(this)}.bind(this),function(t){this._xhr=null,o(t),i&&i(t)}.bind(this))}.bind(this));return n},s["a"].Buffer.prototype.dispose=function(){return s["a"].prototype.dispose.call(this),this._buffer=null,this._xhr&&(s["a"].Buffer._removeFromDownloadQueue(this._xhr),this._xhr.abort(),this._xhr=null),this},Object.defineProperty(s["a"].Buffer.prototype,"loaded",{get:function(){return this.length>0}}),Object.defineProperty(s["a"].Buffer.prototype,"duration",{get:function(){return this._buffer?this._buffer.duration:0}}),Object.defineProperty(s["a"].Buffer.prototype,"length",{get:function(){return this._buffer?this._buffer.length:0}}),Object.defineProperty(s["a"].Buffer.prototype,"numberOfChannels",{get:function(){return this._buffer?this._buffer.numberOfChannels:0}}),s["a"].Buffer.prototype.fromArray=function(t){var e=t[0].length>0,i=e?t.length:1,n=e?t[0].length:t.length,o=this.context.createBuffer(i,n,this.context.sampleRate);e||1!==i||(t=[t]);for(var a=0;a<i;a++)o.copyToChannel(t[a],a);return this._buffer=o,this},s["a"].Buffer.prototype.toMono=function(t){if(s["a"].isNumber(t))this.fromArray(this.toArray(t));else{for(var e=new Float32Array(this.length),i=this.numberOfChannels,n=0;n<i;n++)for(var o=this.toArray(n),a=0;a<o.length;a++)e[a]+=o[a];e=e.map((function(t){return t/i})),this.fromArray(e)}return this},s["a"].Buffer.prototype.toArray=function(t){if(s["a"].isNumber(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);for(var e=[],i=0;i<this.numberOfChannels;i++)e[i]=this.getChannelData(i);return e},s["a"].Buffer.prototype.getChannelData=function(t){return this._buffer.getChannelData(t)},s["a"].Buffer.prototype.slice=function(t,e){e=s["a"].defaultArg(e,this.duration);for(var i=Math.floor(this.context.sampleRate*this.toSeconds(t)),n=Math.floor(this.context.sampleRate*this.toSeconds(e)),o=[],a=0;a<this.numberOfChannels;a++)o[a]=this.toArray(a).slice(i,n);var r=(new s["a"].Buffer).fromArray(o);return r},s["a"].Buffer.prototype._reverse=function(){if(this.loaded)for(var t=0;t<this.numberOfChannels;t++)Array.prototype.reverse.call(this.getChannelData(t));return this},Object.defineProperty(s["a"].Buffer.prototype,"reverse",{get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())}}),s["a"].Emitter.mixin(s["a"].Buffer),s["a"].Buffer._downloadQueue=[],s["a"].Buffer.baseUrl="",s["a"].Buffer.fromArray=function(t){return(new s["a"].Buffer).fromArray(t)},s["a"].Buffer.fromUrl=function(t){var e=new s["a"].Buffer;return e.load(t).then((function(){return e}))},s["a"].Buffer._removeFromDownloadQueue=function(t){var e=s["a"].Buffer._downloadQueue.indexOf(t);-1!==e&&s["a"].Buffer._downloadQueue.splice(e,1)},s["a"].Buffer.load=function(t,e,i){e=s["a"].defaultArg(e,s["a"].noOp);var n=t.match(/\[(.+\|?)+\]$/);if(n){for(var o=n[1].split("|"),a=o[0],r=0;r<o.length;r++)if(s["a"].Buffer.supportsType(o[r])){a=o[r];break}t=t.replace(n[0],a)}function u(t){if(s["a"].Buffer._removeFromDownloadQueue(h),s["a"].Buffer.emit("error",t),!i)throw t;i(t)}function c(){for(var t=0,e=0;e<s["a"].Buffer._downloadQueue.length;e++)t+=s["a"].Buffer._downloadQueue[e].progress;s["a"].Buffer.emit("progress",t/s["a"].Buffer._downloadQueue.length)}var h=new XMLHttpRequest;return h.open("GET",s["a"].Buffer.baseUrl+t,!0),h.responseType="arraybuffer",h.progress=0,s["a"].Buffer._downloadQueue.push(h),h.addEventListener("load",(function(){200===h.status?s["a"].context.decodeAudioData(h.response).then((function(t){h.progress=1,c(),e(t),s["a"].Buffer._removeFromDownloadQueue(h),0===s["a"].Buffer._downloadQueue.length&&s["a"].Buffer.emit("load")})).catch((function(){s["a"].Buffer._removeFromDownloadQueue(h),u("Tone.Buffer: could not decode audio data: "+t)})):u("Tone.Buffer: could not locate file: "+t)})),h.addEventListener("error",u),h.addEventListener("progress",(function(t){t.lengthComputable&&(h.progress=t.loaded/t.total*.95,c())})),h.send(),h},s["a"].Buffer.cancelDownloads=function(){return s["a"].Buffer._downloadQueue.slice().forEach((function(t){s["a"].Buffer._removeFromDownloadQueue(t),t.abort()})),s["a"].Buffer},s["a"].Buffer.supportsType=function(t){var e=t.split(".");e=e[e.length-1];var i=document.createElement("audio").canPlayType("audio/"+e);return""!==i},s["a"].loaded=function(){var t,e;function i(){s["a"].Buffer.off("load",t),s["a"].Buffer.off("error",e)}return new Promise((function(i,n){t=function(){i()},e=function(){n()},s["a"].Buffer.on("load",t),s["a"].Buffer.on("error",e)})).then(i).catch((function(t){throw i(),new Error(t)}))};s["a"].Buffer;s["a"].Buffers=function(t){var e=Array.prototype.slice.call(arguments);e.shift();var i=s["a"].defaults(e,["onload","baseUrl"],s["a"].Buffers);for(var n in s["a"].call(this),this._buffers={},this.baseUrl=i.baseUrl,this._loadingCount=0,t)this._loadingCount++,this.add(n,t[n],this._bufferLoaded.bind(this,i.onload))},s["a"].extend(s["a"].Buffers),s["a"].Buffers.defaults={onload:s["a"].noOp,baseUrl:""},s["a"].Buffers.prototype.has=function(t){return this._buffers.hasOwnProperty(t)},s["a"].Buffers.prototype.get=function(t){if(this.has(t))return this._buffers[t];throw new Error("Tone.Buffers: no buffer named "+t)},s["a"].Buffers.prototype._bufferLoaded=function(t){this._loadingCount--,0===this._loadingCount&&t&&t(this)},Object.defineProperty(s["a"].Buffers.prototype,"loaded",{get:function(){var t=!0;for(var e in this._buffers){var i=this.get(e);t=t&&i.loaded}return t}}),s["a"].Buffers.prototype.add=function(t,e,i){return i=s["a"].defaultArg(i,s["a"].noOp),e instanceof s["a"].Buffer?(this._buffers[t]=e,i(this)):e instanceof AudioBuffer?(this._buffers[t]=new s["a"].Buffer(e),i(this)):s["a"].isString(e)&&(this._buffers[t]=new s["a"].Buffer(this.baseUrl+e,i)),this},s["a"].Buffers.prototype.dispose=function(){for(var t in s["a"].prototype.dispose.call(this),this._buffers)this._buffers[t].dispose();return this._buffers=null,this};s["a"].Buffers;function w(t){return function(e,i){i=this.toSeconds(i),t.apply(this,arguments);var n=this._events.get(i),o=this._events.previousEvent(n),a=this._getTicksUntilEvent(o,i);return n.ticks=Math.max(a,0),this}}s["a"].TickSignal=function(t){t=s["a"].defaultArg(t,1),s["a"].Signal.call(this,{units:s["a"].Type.Ticks,value:t}),this._events.memory=1/0,this.cancelScheduledValues(0),this._events.add({type:s["a"].Param.AutomationType.SetValue,time:0,value:t})},s["a"].extend(s["a"].TickSignal,s["a"].Signal),s["a"].TickSignal.prototype.setValueAtTime=w(s["a"].Signal.prototype.setValueAtTime),s["a"].TickSignal.prototype.linearRampToValueAtTime=w(s["a"].Signal.prototype.linearRampToValueAtTime),s["a"].TickSignal.prototype.setTargetAtTime=function(t,e,i){e=this.toSeconds(e),this.setRampPoint(e),t=this._fromUnits(t);for(var n=this._events.get(e),o=Math.round(Math.max(1/i,1)),a=0;a<=o;a++){var s=i*a+e,r=this._exponentialApproach(n.time,n.value,t,i,s);this.linearRampToValueAtTime(this._toUnits(r),s)}return this},s["a"].TickSignal.prototype.exponentialRampToValueAtTime=function(t,e){e=this.toSeconds(e),t=this._fromUnits(t);for(var i=this._events.get(e),n=Math.round(Math.max(10*(e-i.time),1)),o=(e-i.time)/n,a=0;a<=n;a++){var s=o*a+i.time,r=this._exponentialInterpolate(i.time,i.value,e,t,s);this.linearRampToValueAtTime(this._toUnits(r),s)}return this},s["a"].TickSignal.prototype._getTicksUntilEvent=function(t,e){if(null===t)t={ticks:0,time:0};else if(s["a"].isUndef(t.ticks)){var i=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(i,t.time)}var n=this.getValueAtTime(t.time),o=this.getValueAtTime(e);return this._events.get(e).time===e&&this._events.get(e).type===s["a"].Param.AutomationType.SetValue&&(o=this.getValueAtTime(e-this.sampleTime)),.5*(e-t.time)*(n+o)+t.ticks},s["a"].TickSignal.prototype.getTicksAtTime=function(t){t=this.toSeconds(t);var e=this._events.get(t);return Math.max(this._getTicksUntilEvent(e,t),0)},s["a"].TickSignal.prototype.getDurationOfTicks=function(t,e){e=this.toSeconds(e);var i=this.getTicksAtTime(e);return this.getTimeOfTick(i+t)-e},s["a"].TickSignal.prototype.getTimeOfTick=function(t){var e=this._events.get(t,"ticks"),i=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&i&&i.type===s["a"].Param.AutomationType.Linear&&e.value!==i.value){var n=this.getValueAtTime(e.time),o=this.getValueAtTime(i.time),a=(o-n)/(i.time-e.time),r=Math.sqrt(Math.pow(n,2)-2*a*(e.ticks-t)),u=(-n+r)/a,c=(-n-r)/a;return(u>0?u:c)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue},s["a"].TickSignal.prototype.ticksToTime=function(t,e){return e=this.toSeconds(e),new s["a"].Time(this.getDurationOfTicks(t,e))},s["a"].TickSignal.prototype.timeToTicks=function(t,e){e=this.toSeconds(e),t=this.toSeconds(t);var i=this.getTicksAtTime(e),n=this.getTicksAtTime(e+t);return new s["a"].Ticks(n-i)};s["a"].TickSignal;s["a"].TimelineState=function(t){s["a"].Timeline.call(this),this._initial=t},s["a"].extend(s["a"].TimelineState,s["a"].Timeline),s["a"].TimelineState.prototype.getValueAtTime=function(t){var e=this.get(t);return null!==e?e.state:this._initial},s["a"].TimelineState.prototype.setStateAtTime=function(t,e){return this.add({state:t,time:e}),this},s["a"].TimelineState.prototype.getLastState=function(t,e){e=this.toSeconds(e);for(var i=this._search(e),n=i;n>=0;n--){var o=this._timeline[n];if(o.state===t)return o}},s["a"].TimelineState.prototype.getNextState=function(t,e){e=this.toSeconds(e);var i=this._search(e);if(-1!==i)for(var n=i;n<this._timeline.length;n++){var o=this._timeline[n];if(o.state===t)return o}};s["a"].TimelineState;s["a"].TickSource=function(){var t=s["a"].defaults(arguments,["frequency"],s["a"].TickSource);this.frequency=new s["a"].TickSignal(t.frequency),this._readOnly("frequency"),this._state=new s["a"].TimelineState(s["a"].State.Stopped),this._state.setStateAtTime(s["a"].State.Stopped,0),this._tickOffset=new s["a"].Timeline,this.setTicksAtTime(0,0)},s["a"].extend(s["a"].TickSource),s["a"].TickSource.defaults={frequency:1},Object.defineProperty(s["a"].TickSource.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())}}),s["a"].TickSource.prototype.start=function(t,e){return t=this.toSeconds(t),this._state.getValueAtTime(t)!==s["a"].State.Started&&(this._state.setStateAtTime(s["a"].State.Started,t),s["a"].isDefined(e)&&this.setTicksAtTime(e,t)),this},s["a"].TickSource.prototype.stop=function(t){if(t=this.toSeconds(t),this._state.getValueAtTime(t)===s["a"].State.Stopped){var e=this._state.get(t);e.time>0&&(this._tickOffset.cancel(e.time),this._state.cancel(e.time))}return this._state.cancel(t),this._state.setStateAtTime(s["a"].State.Stopped,t),this.setTicksAtTime(0,t),this},s["a"].TickSource.prototype.pause=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)===s["a"].State.Started&&this._state.setStateAtTime(s["a"].State.Paused,t),this},s["a"].TickSource.prototype.cancel=function(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this},s["a"].TickSource.prototype.getTicksAtTime=function(t){t=this.toSeconds(t);var e=this._state.getLastState(s["a"].State.Stopped,t),i={state:s["a"].State.Paused,time:t};this._state.add(i);var n=e,o=0;return this._state.forEachBetween(e.time,t+this.sampleTime,function(t){var e=n.time,i=this._tickOffset.get(t.time);i.time>=n.time&&(o=i.ticks,e=i.time),n.state===s["a"].State.Started&&t.state!==s["a"].State.Started&&(o+=this.frequency.getTicksAtTime(t.time)-this.frequency.getTicksAtTime(e)),n=t}.bind(this)),this._state.remove(i),o},Object.defineProperty(s["a"].TickSource.prototype,"ticks",{get:function(){return this.getTicksAtTime(this.now())},set:function(t){this.setTicksAtTime(t,this.now())}}),Object.defineProperty(s["a"].TickSource.prototype,"seconds",{get:function(){return this.getSecondsAtTime(this.now())},set:function(t){var e=this.now(),i=this.frequency.timeToTicks(t,e);this.setTicksAtTime(i,e)}}),s["a"].TickSource.prototype.getSecondsAtTime=function(t){t=this.toSeconds(t);var e=this._state.getLastState(s["a"].State.Stopped,t),i={state:s["a"].State.Paused,time:t};this._state.add(i);var n=e,o=0;return this._state.forEachBetween(e.time,t+this.sampleTime,function(t){var e=n.time,i=this._tickOffset.get(t.time);i.time>=n.time&&(o=i.seconds,e=i.time),n.state===s["a"].State.Started&&t.state!==s["a"].State.Started&&(o+=t.time-e),n=t}.bind(this)),this._state.remove(i),o},s["a"].TickSource.prototype.setTicksAtTime=function(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({time:e,ticks:t,seconds:this.frequency.getDurationOfTicks(t,e)}),this},s["a"].TickSource.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},s["a"].TickSource.prototype.getTimeOfTick=function(t,e){e=s["a"].defaultArg(e,this.now());var i=this._tickOffset.get(e),n=this._state.get(e),o=Math.max(i.time,n.time),a=this.frequency.getTicksAtTime(o)+t-i.ticks;return this.frequency.getTimeOfTick(a)},s["a"].TickSource.prototype.forEachTickBetween=function(t,e,i){var n=this._state.get(t);if(this._state.forEachBetween(t,e,function(e){n.state===s["a"].State.Started&&e.state!==s["a"].State.Started&&this.forEachTickBetween(Math.max(n.time,t),e.time-this.sampleTime,i),n=e}.bind(this)),t=Math.max(n.time,t),n.state===s["a"].State.Started&&this._state){var o=this.frequency.getTicksAtTime(t),a=this.frequency.getTicksAtTime(n.time),r=o-a,u=r%1;0!==u&&(u=1-u);var c=this.frequency.getTimeOfTick(o+u),h=null;while(c<e&&this._state){try{i(c,Math.round(this.getTicksAtTime(c)))}catch(q){h=q;break}this._state&&(c+=this.frequency.getDurationOfTicks(1,c))}}if(h)throw h;return this},s["a"].TickSource.prototype.dispose=function(){return s["a"].Param.prototype.dispose.call(this),this._state.dispose(),this._state=null,this._tickOffset.dispose(),this._tickOffset=null,this._writable("frequency"),this.frequency.dispose(),this.frequency=null,this};s["a"].TickSource;s["a"].Clock=function(){var t=s["a"].defaults(arguments,["callback","frequency"],s["a"].Clock);s["a"].Emitter.call(this),this.callback=t.callback,this._nextTick=0,this._tickSource=new s["a"].TickSource(t.frequency),this._lastUpdate=0,this.frequency=this._tickSource.frequency,this._readOnly("frequency"),this._state=new s["a"].TimelineState(s["a"].State.Stopped),this._state.setStateAtTime(s["a"].State.Stopped,0),this._boundLoop=this._loop.bind(this),this.context.on("tick",this._boundLoop)},s["a"].extend(s["a"].Clock,s["a"].Emitter),s["a"].Clock.defaults={callback:s["a"].noOp,frequency:1},Object.defineProperty(s["a"].Clock.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())}}),s["a"].Clock.prototype.start=function(t,e){return this.context.resume(),t=this.toSeconds(t),this._state.getValueAtTime(t)!==s["a"].State.Started&&(this._state.setStateAtTime(s["a"].State.Started,t),this._tickSource.start(t,e),t<this._lastUpdate&&this.emit("start",t,e)),this},s["a"].Clock.prototype.stop=function(t){return t=this.toSeconds(t),this._state.cancel(t),this._state.setStateAtTime(s["a"].State.Stopped,t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this},s["a"].Clock.prototype.pause=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)===s["a"].State.Started&&(this._state.setStateAtTime(s["a"].State.Paused,t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this},Object.defineProperty(s["a"].Clock.prototype,"ticks",{get:function(){return Math.ceil(this.getTicksAtTime(this.now()))},set:function(t){this._tickSource.ticks=t}}),Object.defineProperty(s["a"].Clock.prototype,"seconds",{get:function(){return this._tickSource.seconds},set:function(t){this._tickSource.seconds=t}}),s["a"].Clock.prototype.getSecondsAtTime=function(t){return this._tickSource.getSecondsAtTime(t)},s["a"].Clock.prototype.setTicksAtTime=function(t,e){return this._tickSource.setTicksAtTime(t,e),this},s["a"].Clock.prototype.getTicksAtTime=function(t){return this._tickSource.getTicksAtTime(t)},s["a"].Clock.prototype.nextTickTime=function(t,e){e=this.toSeconds(e);var i=this.getTicksAtTime(e);return this._tickSource.getTimeOfTick(i+t,e)},s["a"].Clock.prototype._loop=function(){var t=this._lastUpdate,e=this.now();this._lastUpdate=e,t!==e&&(this._state.forEachBetween(t,e,function(t){switch(t.state){case s["a"].State.Started:var e=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,e);break;case s["a"].State.Stopped:0!==t.time&&this.emit("stop",t.time);break;case s["a"].State.Paused:this.emit("pause",t.time);break}}.bind(this)),this._tickSource.forEachTickBetween(t,e,function(t,e){this.callback(t,e)}.bind(this)))},s["a"].Clock.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},s["a"].Clock.prototype.dispose=function(){s["a"].Emitter.prototype.dispose.call(this),this.context.off("tick",this._boundLoop),this._writable("frequency"),this._tickSource.dispose(),this._tickSource=null,this.frequency=null,this._boundLoop=null,this._nextTick=1/0,this.callback=null,this._state.dispose(),this._state=null};s["a"].Clock;s["a"].IntervalTimeline=function(){s["a"].call(this),this._root=null,this._length=0},s["a"].extend(s["a"].IntervalTimeline),s["a"].IntervalTimeline.prototype.add=function(t){if(s["a"].isUndef(t.time)||s["a"].isUndef(t.duration))throw new Error("Tone.IntervalTimeline: events must have time and duration parameters");t.time=t.time.valueOf();var e=new C(t.time,t.time+t.duration,t);null===this._root?this._root=e:this._root.insert(e),this._length++;while(null!==e)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this},s["a"].IntervalTimeline.prototype.remove=function(t){if(null!==this._root){var e=[];this._root.search(t.time,e);for(var i=0;i<e.length;i++){var n=e[i];if(n.event===t){this._removeNode(n),this._length--;break}}}return this},Object.defineProperty(s["a"].IntervalTimeline.prototype,"length",{get:function(){return this._length}}),s["a"].IntervalTimeline.prototype.cancel=function(t){return this.forEachFrom(t,function(t){this.remove(t)}.bind(this)),this},s["a"].IntervalTimeline.prototype._setRoot=function(t){this._root=t,null!==this._root&&(this._root.parent=null)},s["a"].IntervalTimeline.prototype._replaceNodeInParent=function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)},s["a"].IntervalTimeline.prototype._removeNode=function(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{var e,i,n=t.getBalance();if(n>0)if(null===t.left.right)e=t.left,e.right=t.right,i=e;else{e=t.left.right;while(null!==e.right)e=e.right;e.parent.right=e.left,i=e.parent,e.left=t.left,e.right=t.right}else if(null===t.right.left)e=t.right,e.left=t.left,i=e;else{e=t.right.left;while(null!==e.left)e=e.left;e.parent.left=e.right,i=e.parent,e.left=t.left,e.right=t.right}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),this._rebalance(i)}t.dispose()},s["a"].IntervalTimeline.prototype._rotateLeft=function(t){var e=t.parent,i=t.isLeftChild(),n=t.right;t.right=n.left,n.left=t,null!==e?i?e.left=n:e.right=n:this._setRoot(n)},s["a"].IntervalTimeline.prototype._rotateRight=function(t){var e=t.parent,i=t.isLeftChild(),n=t.left;t.left=n.right,n.right=t,null!==e?i?e.left=n:e.right=n:this._setRoot(n)},s["a"].IntervalTimeline.prototype._rebalance=function(t){var e=t.getBalance();e>1?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))},s["a"].IntervalTimeline.prototype.get=function(t){if(null!==this._root){var e=[];if(this._root.search(t,e),e.length>0){for(var i=e[0],n=1;n<e.length;n++)e[n].low>i.low&&(i=e[n]);return i.event}}return null},s["a"].IntervalTimeline.prototype.forEach=function(t){if(null!==this._root){var e=[];this._root.traverse((function(t){e.push(t)}));for(var i=0;i<e.length;i++){var n=e[i].event;n&&t(n)}}return this},s["a"].IntervalTimeline.prototype.forEachAtTime=function(t,e){if(null!==this._root){var i=[];this._root.search(t,i);for(var n=i.length-1;n>=0;n--){var o=i[n].event;o&&e(o)}}return this},s["a"].IntervalTimeline.prototype.forEachFrom=function(t,e){if(null!==this._root){var i=[];this._root.searchAfter(t,i);for(var n=i.length-1;n>=0;n--){var o=i[n].event;e(o)}}return this},s["a"].IntervalTimeline.prototype.dispose=function(){var t=[];null!==this._root&&this._root.traverse((function(e){t.push(e)}));for(var e=0;e<t.length;e++)t[e].dispose();return t=null,this._root=null,this};var C=function(t,e,i){this.event=i,this.low=t,this.high=e,this.max=this.high,this._left=null,this._right=null,this.parent=null,this.height=0};C.prototype.insert=function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)},C.prototype.search=function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))},C.prototype.searchAfter=function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)},C.prototype.traverse=function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)},C.prototype.updateHeight=function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0},C.prototype.updateMax=function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))},C.prototype.getBalance=function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t},C.prototype.isLeftChild=function(){return null!==this.parent&&this.parent.left===this},Object.defineProperty(C.prototype,"left",{get:function(){return this._left},set:function(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),Object.defineProperty(C.prototype,"right",{get:function(){return this._right},set:function(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),C.prototype.dispose=function(){this.parent=null,this._left=null,this._right=null,this.event=null};s["a"].IntervalTimeline;s["a"].Ticks=function(t,e){if(!(this instanceof s["a"].Ticks))return new s["a"].Ticks(t,e);s["a"].TransportTime.call(this,t,e)},s["a"].extend(s["a"].Ticks,s["a"].TransportTime),s["a"].Ticks.prototype._defaultUnits="i",s["a"].Ticks.prototype._now=function(){return s["a"].Transport.ticks},s["a"].Ticks.prototype._beatsToUnits=function(t){return this._getPPQ()*t},s["a"].Ticks.prototype._secondsToUnits=function(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())},s["a"].Ticks.prototype._ticksToUnits=function(t){return t},s["a"].Ticks.prototype.toTicks=function(){return this.valueOf()},s["a"].Ticks.prototype.toSeconds=function(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())};s["a"].Ticks;s["a"].TransportEvent=function(t,e){e=s["a"].defaultArg(e,s["a"].TransportEvent.defaults),s["a"].call(this),this.Transport=t,this.id=s["a"].TransportEvent._eventId++,this.time=s["a"].Ticks(e.time),this.callback=e.callback,this._once=e.once},s["a"].extend(s["a"].TransportEvent),s["a"].TransportEvent.defaults={once:!1,callback:s["a"].noOp},s["a"].TransportEvent._eventId=0,s["a"].TransportEvent.prototype.invoke=function(t){this.callback&&(this.callback(t),this._once&&this.Transport&&this.Transport.clear(this.id))},s["a"].TransportEvent.prototype.dispose=function(){return s["a"].prototype.dispose.call(this),this.Transport=null,this.callback=null,this.time=null,this};s["a"].TransportEvent;s["a"].TransportRepeatEvent=function(t,e){s["a"].TransportEvent.call(this,t,e),e=s["a"].defaultArg(e,s["a"].TransportRepeatEvent.defaults),this.duration=s["a"].Ticks(e.duration),this._interval=s["a"].Ticks(e.interval),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this),this.Transport.on("start loopStart",this._boundRestart),this._restart()},s["a"].extend(s["a"].TransportRepeatEvent,s["a"].TransportEvent),s["a"].TransportRepeatEvent.defaults={duration:1/0,interval:1},s["a"].TransportRepeatEvent.prototype.invoke=function(t){this._createEvents(t),s["a"].TransportEvent.prototype.invoke.call(this,t)},s["a"].TransportRepeatEvent.prototype._createEvents=function(t){var e=this.Transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.Transport.scheduleOnce(this.invoke.bind(this),s["a"].Ticks(this._nextTick)))},s["a"].TransportRepeatEvent.prototype._restart=function(t){this.Transport.clear(this._currentId),this.Transport.clear(this._nextId),this._nextTick=this.time;var e=this.Transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.Transport.scheduleOnce(this.invoke.bind(this),s["a"].Ticks(this._nextTick)),this._nextTick+=this._interval,this._nextId=this.Transport.scheduleOnce(this.invoke.bind(this),s["a"].Ticks(this._nextTick))},s["a"].TransportRepeatEvent.prototype.dispose=function(){return this.Transport.clear(this._currentId),this.Transport.clear(this._nextId),this.Transport.off("start loopStart",this._boundRestart),this._boundCreateEvents=null,s["a"].TransportEvent.prototype.dispose.call(this),this.duration=null,this._interval=null,this};s["a"].TransportRepeatEvent;s["a"].Transport=function(){s["a"].Emitter.call(this),s["a"].getContext(function(){this.loop=!1,this._loopStart=0,this._loopEnd=0,this._ppq=O.defaults.PPQ,this._clock=new s["a"].Clock({callback:this._processTick.bind(this),frequency:0}),this._bindClockEvents(),this.bpm=this._clock.frequency,this.bpm._toUnits=this._toUnits.bind(this),this.bpm._fromUnits=this._fromUnits.bind(this),this.bpm.units=s["a"].Type.BPM,this.bpm.value=O.defaults.bpm,this._readOnly("bpm"),this._timeSignature=O.defaults.timeSignature,this._scheduledEvents={},this._timeline=new s["a"].Timeline,this._repeatedEvents=new s["a"].IntervalTimeline,this._syncedSignals=[],this._swingTicks=O.defaults.PPQ/2,this._swingAmount=0,this.context.transport=this}.bind(this))},s["a"].extend(s["a"].Transport,s["a"].Emitter),s["a"].Transport.defaults={bpm:120,swing:0,swingSubdivision:"8n",timeSignature:4,loopStart:0,loopEnd:"4m",PPQ:192},s["a"].Transport.prototype.isTransport=!0,s["a"].Transport.prototype._processTick=function(t,e){if(this._swingAmount>0&&e%this._ppq!==0&&e%(2*this._swingTicks)!==0){var i=e%(2*this._swingTicks)/(2*this._swingTicks),n=Math.sin(i*Math.PI)*this._swingAmount;t+=s["a"].Ticks(2*this._swingTicks/3).toSeconds()*n}this.loop&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._timeline.forEachAtTime(e,(function(e){e.invoke(t)}))},s["a"].Transport.prototype.schedule=function(t,e){var i=new s["a"].TransportEvent(this,{time:s["a"].TransportTime(e),callback:t});return this._addEvent(i,this._timeline)},s["a"].Transport.prototype.scheduleRepeat=function(t,e,i,n){var o=new s["a"].TransportRepeatEvent(this,{callback:t,interval:s["a"].Time(e),time:s["a"].TransportTime(i),duration:s["a"].Time(s["a"].defaultArg(n,1/0))});return this._addEvent(o,this._repeatedEvents)},s["a"].Transport.prototype.scheduleOnce=function(t,e){var i=new s["a"].TransportEvent(this,{time:s["a"].TransportTime(e),callback:t,once:!0});return this._addEvent(i,this._timeline)},s["a"].Transport.prototype.clear=function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this},s["a"].Transport.prototype._addEvent=function(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id},s["a"].Transport.prototype.cancel=function(t){return t=s["a"].defaultArg(t,0),t=this.toTicks(t),this._timeline.forEachFrom(t,function(t){this.clear(t.id)}.bind(this)),this._repeatedEvents.forEachFrom(t,function(t){this.clear(t.id)}.bind(this)),this},s["a"].Transport.prototype._bindClockEvents=function(){this._clock.on("start",function(t,e){e=s["a"].Ticks(e).toSeconds(),this.emit("start",t,e)}.bind(this)),this._clock.on("stop",function(t){this.emit("stop",t)}.bind(this)),this._clock.on("pause",function(t){this.emit("pause",t)}.bind(this))},Object.defineProperty(s["a"].Transport.prototype,"state",{get:function(){return this._clock.getStateAtTime(this.now())}}),s["a"].Transport.prototype.start=function(t,e){return s["a"].isDefined(e)&&(e=this.toTicks(e)),this._clock.start(t,e),this},s["a"].Transport.prototype.stop=function(t){return this._clock.stop(t),this},s["a"].Transport.prototype.pause=function(t){return this._clock.pause(t),this},s["a"].Transport.prototype.toggle=function(t){return t=this.toSeconds(t),this._clock.getStateAtTime(t)!==s["a"].State.Started?this.start(t):this.stop(t),this},Object.defineProperty(s["a"].Transport.prototype,"timeSignature",{get:function(){return this._timeSignature},set:function(t){s["a"].isArray(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}}),Object.defineProperty(s["a"].Transport.prototype,"loopStart",{get:function(){return s["a"].Ticks(this._loopStart).toSeconds()},set:function(t){this._loopStart=this.toTicks(t)}}),Object.defineProperty(s["a"].Transport.prototype,"loopEnd",{get:function(){return s["a"].Ticks(this._loopEnd).toSeconds()},set:function(t){this._loopEnd=this.toTicks(t)}}),s["a"].Transport.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(s["a"].Transport.prototype,"swing",{get:function(){return this._swingAmount},set:function(t){this._swingAmount=t}}),Object.defineProperty(s["a"].Transport.prototype,"swingSubdivision",{get:function(){return s["a"].Ticks(this._swingTicks).toNotation()},set:function(t){this._swingTicks=this.toTicks(t)}}),Object.defineProperty(s["a"].Transport.prototype,"position",{get:function(){var t=this.now(),e=this._clock.getTicksAtTime(t);return s["a"].Ticks(e).toBarsBeatsSixteenths()},set:function(t){var e=this.toTicks(t);this.ticks=e}}),Object.defineProperty(s["a"].Transport.prototype,"seconds",{get:function(){return this._clock.seconds},set:function(t){var e=this.now(),i=this.bpm.timeToTicks(t,e);this.ticks=i}}),Object.defineProperty(s["a"].Transport.prototype,"progress",{get:function(){if(this.loop){var t=this.now(),e=this._clock.getTicksAtTime(t);return(e-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}}),Object.defineProperty(s["a"].Transport.prototype,"ticks",{get:function(){return this._clock.ticks},set:function(t){if(this._clock.ticks!==t){var e=this.now();this.state===s["a"].State.Started?(this.emit("stop",e),this._clock.setTicksAtTime(t,e),this.emit("start",e,this.seconds)):this._clock.setTicksAtTime(t,e)}}}),s["a"].Transport.prototype.getTicksAtTime=function(t){return Math.round(this._clock.getTicksAtTime(t))},s["a"].Transport.prototype.getSecondsAtTime=function(t){return this._clock.getSecondsAtTime(t)},Object.defineProperty(s["a"].Transport.prototype,"PPQ",{get:function(){return this._ppq},set:function(t){var e=this.bpm.value;this._ppq=t,this.bpm.value=e}}),s["a"].Transport.prototype._fromUnits=function(t){return 1/(60/t/this.PPQ)},s["a"].Transport.prototype._toUnits=function(t){return t/this.PPQ*60},s["a"].Transport.prototype.nextSubdivision=function(t){if(t=this.toTicks(t),this.state!==s["a"].State.Started)return 0;var e=this.now(),i=this.getTicksAtTime(e),n=t-i%t;return this._clock.nextTickTime(n,e)},s["a"].Transport.prototype.syncSignal=function(t,e){if(!e){var i=this.now();e=0!==t.getValueAtTime(i)?t.getValueAtTime(i)/this.bpm.getValueAtTime(i):0}var n=new s["a"].Gain(e);return this.bpm.chain(n,t._param),this._syncedSignals.push({ratio:n,signal:t,initial:t.value}),t.value=0,this},s["a"].Transport.prototype.unsyncSignal=function(t){for(var e=this._syncedSignals.length-1;e>=0;e--){var i=this._syncedSignals[e];i.signal===t&&(i.ratio.dispose(),i.signal.value=i.initial,this._syncedSignals.splice(e,1))}return this},s["a"].Transport.prototype.dispose=function(){return s["a"].Emitter.prototype.dispose.call(this),this._clock.dispose(),this._clock=null,this._writable("bpm"),this.bpm=null,this._timeline.dispose(),this._timeline=null,this._repeatedEvents.dispose(),this._repeatedEvents=null,this};var O=s["a"].Transport;s["a"].Transport=new O,s["a"].Context.on("init",(function(t){t.transport&&t.transport.isTransport?s["a"].Transport=t.transport:s["a"].Transport=new O})),s["a"].Context.on("close",(function(t){t.transport&&t.transport.isTransport&&t.transport.dispose()}));s["a"].Transport;s["a"].Source=function(t){t=s["a"].defaultArg(t,s["a"].Source.defaults),s["a"].AudioNode.call(this),this._volume=this.output=new s["a"].Volume(t.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._state=new s["a"].TimelineState(s["a"].State.Stopped),this._state.memory=100,this._synced=!1,this._scheduled=[],this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode="explicit",this.mute=t.mute},s["a"].extend(s["a"].Source,s["a"].AudioNode),s["a"].Source.defaults={volume:0,mute:!1},Object.defineProperty(s["a"].Source.prototype,"state",{get:function(){return this._synced?s["a"].Transport.state===s["a"].State.Started?this._state.getValueAtTime(s["a"].Transport.seconds):s["a"].State.Stopped:this._state.getValueAtTime(this.now())}}),Object.defineProperty(s["a"].Source.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),s["a"].Source.prototype._start=s["a"].noOp,s["a"].Source.prototype.restart=s["a"].noOp,s["a"].Source.prototype._stop=s["a"].noOp,s["a"].Source.prototype.start=function(t,e,i){if(s["a"].isUndef(t)&&this._synced?t=s["a"].Transport.seconds:(t=this.toSeconds(t),t=Math.max(t,this.context.currentTime)),this._state.getValueAtTime(t)===s["a"].State.Started)this._state.cancel(t),this._state.setStateAtTime(s["a"].State.Started,t),this.restart(t,e,i);else if(this._state.setStateAtTime(s["a"].State.Started,t),this._synced){var n=this._state.get(t);n.offset=s["a"].defaultArg(e,0),n.duration=i;var o=s["a"].Transport.schedule(function(t){this._start(t,e,i)}.bind(this),t);this._scheduled.push(o),s["a"].Transport.state===s["a"].State.Started&&this._syncedStart(this.now(),s["a"].Transport.seconds)}else this._start.apply(this,arguments);return this},s["a"].Source.prototype.stop=function(t){if(s["a"].isUndef(t)&&this._synced?t=s["a"].Transport.seconds:(t=this.toSeconds(t),t=Math.max(t,this.context.currentTime)),this._synced){var e=s["a"].Transport.schedule(this._stop.bind(this),t);this._scheduled.push(e)}else this._stop.apply(this,arguments);return this._state.cancel(t),this._state.setStateAtTime(s["a"].State.Stopped,t),this},s["a"].Source.prototype.sync=function(){return this._synced=!0,this._syncedStart=function(t,e){if(e>0){var i=this._state.get(e);if(i&&i.state===s["a"].State.Started&&i.time!==e){var n,o=e-this.toSeconds(i.time);i.duration&&(n=this.toSeconds(i.duration)-o),this._start(t,this.toSeconds(i.offset)+o,n)}}}.bind(this),this._syncedStop=function(t){var e=s["a"].Transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));this._state.getValueAtTime(e)===s["a"].State.Started&&this._stop(t)}.bind(this),s["a"].Transport.on("start loopStart",this._syncedStart),s["a"].Transport.on("stop pause loopEnd",this._syncedStop),this},s["a"].Source.prototype.unsync=function(){this._synced&&(s["a"].Transport.off("stop pause loopEnd",this._syncedStop),s["a"].Transport.off("start loopStart",this._syncedStart)),this._synced=!1;for(var t=0;t<this._scheduled.length;t++){var e=this._scheduled[t];s["a"].Transport.clear(e)}return this._scheduled=[],this._state.cancel(0),this},s["a"].Source.prototype.dispose=function(){s["a"].AudioNode.prototype.dispose.call(this),this.unsync(),this._scheduled=null,this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null,this._state.dispose(),this._state=null};s["a"].Source;s["a"].BufferSource=function(){var t=s["a"].defaults(arguments,["buffer","onload"],s["a"].BufferSource);s["a"].AudioNode.call(this,t),this.onended=t.onended,this._startTime=-1,this._sourceStarted=!1,this._sourceStopped=!1,this._stopTime=-1,this._gainNode=this.output=new s["a"].Gain(0),this._source=this.context.createBufferSource(),s["a"].connect(this._source,this._gainNode),this._source.onended=this._onended.bind(this),this._buffer=new s["a"].Buffer(t.buffer,t.onload),this.playbackRate=new s["a"].Param({param:this._source.playbackRate,units:s["a"].Type.Positive,value:t.playbackRate}),this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut,this.curve=t.curve,this._onendedTimeout=-1,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd},s["a"].extend(s["a"].BufferSource,s["a"].AudioNode),s["a"].BufferSource.defaults={onended:s["a"].noOp,onload:s["a"].noOp,loop:!1,loopStart:0,loopEnd:0,fadeIn:0,fadeOut:0,curve:"linear",playbackRate:1},Object.defineProperty(s["a"].BufferSource.prototype,"state",{get:function(){return this.getStateAtTime(this.now())}}),s["a"].BufferSource.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),-1!==this._startTime&&this._startTime<=t&&(-1===this._stopTime||t<this._stopTime)&&!this._sourceStopped?s["a"].State.Started:s["a"].State.Stopped},s["a"].BufferSource.prototype.start=function(t,e,i,n){this.log("start",t,e,i,n),this.assert(-1===this._startTime,"can only be started once"),this.assert(this.buffer.loaded,"buffer is either not set or not loaded"),this.assert(!this._sourceStopped,"source is already stopped"),t=this.toSeconds(t),e=this.loop?s["a"].defaultArg(e,this.loopStart):s["a"].defaultArg(e,0),e=this.toSeconds(e),e=Math.max(e,0),n=s["a"].defaultArg(n,1);var o=this.toSeconds(this.fadeIn);if(o>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this.curve?this._gainNode.gain.linearRampToValueAtTime(n,t+o):this._gainNode.gain.exponentialApproachValueAtTime(n,t,o)):this._gainNode.gain.setValueAtTime(n,t),this._startTime=t,s["a"].isDefined(i)){var a=this.toSeconds(i);a=Math.max(a,0),this.stop(t+a)}if(this.loop){var r=this.loopEnd||this.buffer.duration,u=this.loopStart,c=r-u;e>=r&&(e=(e-u)%c+u)}return this._source.buffer=this.buffer.get(),this._source.loopEnd=this.loopEnd||this.buffer.duration,e<this.buffer.duration&&(this._sourceStarted=!0,this._source.start(t,e)),this},s["a"].BufferSource.prototype.stop=function(t){this.log("stop",t),this.assert(this.buffer.loaded,"buffer is either not set or not loaded"),this.assert(!this._sourceStopped,"source is already stopped"),t=this.toSeconds(t),-1!==this._stopTime&&this.cancelStop();var e=this.toSeconds(this.fadeOut);return this._stopTime=t+e,e>0?"linear"===this.curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),s["a"].context.clearTimeout(this._onendedTimeout),this._onendedTimeout=s["a"].context.setTimeout(this._onended.bind(this),this._stopTime-this.now()),this},s["a"].BufferSource.prototype.cancelStop=function(){if(-1!==this._startTime&&!this._sourceStopped){var t=this.toSeconds(this.fadeIn);this._gainNode.gain.cancelScheduledValues(this._startTime+t+this.sampleTime),this.context.clearTimeout(this._onendedTimeout),this._stopTime=-1}return this},s["a"].BufferSource.prototype._onended=function(){if(!this._sourceStopped){this._sourceStopped=!0;var t="exponential"===this.curve?2*this.fadeOut:0;this._sourceStarted&&-1!==this._stopTime&&this._source.stop(this._stopTime+t),this.onended(this),setTimeout(function(){this._source&&(this._source.disconnect(),this._gainNode.disconnect())}.bind(this),1e3*t+100)}},Object.defineProperty(s["a"].BufferSource.prototype,"loopStart",{get:function(){return this._source.loopStart},set:function(t){this._source.loopStart=this.toSeconds(t)}}),Object.defineProperty(s["a"].BufferSource.prototype,"loopEnd",{get:function(){return this._source.loopEnd},set:function(t){this._source.loopEnd=this.toSeconds(t)}}),Object.defineProperty(s["a"].BufferSource.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)}}),Object.defineProperty(s["a"].BufferSource.prototype,"loop",{get:function(){return this._source.loop},set:function(t){this._source.loop=t,this.cancelStop()}}),s["a"].BufferSource.prototype.dispose=function(){return this._wasDisposed||(this._wasDisposed=!0,s["a"].AudioNode.prototype.dispose.call(this),this.onended=null,this._source.onended=null,this._source.disconnect(),this._source=null,this._gainNode.dispose(),this._gainNode=null,this._buffer.dispose(),this._buffer=null,this._startTime=-1,this.playbackRate=null,s["a"].context.clearTimeout(this._onendedTimeout)),this};s["a"].BufferSource;s["a"].Sampler=function(t){var e=Array.prototype.slice.call(arguments);e.shift();var i=s["a"].defaults(e,["onload","baseUrl"],s["a"].Sampler);s["a"].Instrument.call(this,i);var n={};for(var o in t)if(s["a"].isNote(o)){var a=s["a"].Frequency(o).toMidi();n[a]=t[o]}else{if(isNaN(parseFloat(o)))throw new Error("Tone.Sampler: url keys must be the note's pitch");n[o]=t[o]}this._buffers=new s["a"].Buffers(n,i.onload,i.baseUrl),this._activeSources={},this.attack=i.attack,this.release=i.release,this.curve=i.curve},s["a"].extend(s["a"].Sampler,s["a"].Instrument),s["a"].Sampler.defaults={attack:0,release:.1,onload:s["a"].noOp,baseUrl:"",curve:"exponential"},s["a"].Sampler.prototype._findClosest=function(t){var e=96,i=0;while(i<e){if(this._buffers.has(t+i))return-i;if(this._buffers.has(t-i))return i;i++}throw new Error("No available buffers for note: "+t)},s["a"].Sampler.prototype.triggerAttack=function(t,e,i){this.log("triggerAttack",t,e,i),Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var o=s["a"].Frequency(t[n]).toMidi(),a=this._findClosest(o),r=o-a,u=this._buffers.get(r),c=s["a"].intervalToFrequencyRatio(a),h=new s["a"].BufferSource({buffer:u,playbackRate:c,fadeIn:this.attack,fadeOut:this.release,curve:this.curve}).connect(this.output);h.start(e,0,u.duration/c,i),s["a"].isArray(this._activeSources[o])||(this._activeSources[o]=[]),this._activeSources[o].push(h),h.onended=function(){if(this._activeSources&&this._activeSources[o]){var t=this._activeSources[o].indexOf(h);-1!==t&&this._activeSources[o].splice(t,1)}}.bind(this)}return this},s["a"].Sampler.prototype.triggerRelease=function(t,e){this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=s["a"].Frequency(t[i]).toMidi();this._activeSources[n]&&this._activeSources[n].length&&(e=this.toSeconds(e),this._activeSources[n].forEach((function(t){t.stop(e)})),this._activeSources[n]=[])}return this},s["a"].Sampler.prototype.releaseAll=function(t){for(var e in t=this.toSeconds(t),this._activeSources){var i=this._activeSources[e];while(i.length){var n=i.shift();n.stop(t)}}return this},s["a"].Sampler.prototype.sync=function(){return this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this},s["a"].Sampler.prototype.triggerAttackRelease=function(t,e,i,n){if(i=this.toSeconds(i),this.triggerAttack(t,i,n),s["a"].isArray(e)&&s["a"].isArray(t))for(var o=0;o<t.length;o++){var a=e[Math.min(o,e.length-1)];this.triggerRelease(t[o],i+this.toSeconds(a))}else this.triggerRelease(t,i+this.toSeconds(e));return this},s["a"].Sampler.prototype.add=function(t,e,i){if(s["a"].isNote(t)){var n=s["a"].Frequency(t).toMidi();this._buffers.add(n,e,i)}else{if(isNaN(parseFloat(t)))throw new Error("Tone.Sampler: note must be the note's pitch. Instead got "+t);this._buffers.add(t,e,i)}},Object.defineProperty(s["a"].Sampler.prototype,"loaded",{get:function(){return this._buffers.loaded}}),s["a"].Sampler.prototype.dispose=function(){for(var t in s["a"].Instrument.prototype.dispose.call(this),this._buffers.dispose(),this._buffers=null,this._activeSources)this._activeSources[t].forEach((function(t){t.dispose()}));return this._activeSources=null,this};var P=s["a"].Sampler,B=P,E=i("d3a7"),M=i("8b27"),V=i("89e0"),N=i("6d7b"),U=(i("3c43"),{name:"HappySynthPlay",data:function(){return{loadingMsgShown:!1,loadSuccessMsgShown:!1,loadFailMsgShown:!1,loadSuccessMsgText:"加载默认音色完成",sampler:null}},components:{PianoKeys:a["a"],Message:M["a"],MessageContainer:E["a"],Icon:V["a"]},methods:{noteOn:function(t){this.sampler.triggerAttack(t)},noteOff:function(t){this.sampler.triggerRelease(t)}},mounted:function(){var t=this;new Promise((function(t){setTimeout((function(){t()}),100)})).then((function(){return t.loadingMsgShown=!0,Promise.all([new Promise((function(t){setTimeout((function(){t()}),1e3)})),N["a"].get()])})).then((function(e){404===e[1].data.status?(t.loadingMsgShown=!1,t.loadSuccessMsgText="加载默认音色完成",t.loadSuccessMsgShown=!0,setTimeout((function(){t.loadSuccessMsgShown=!1}),1e3),t.sampler=new B(e[1].data.data,(function(){console.log("sample loaded? ".concat(t.sampler.loaded))})).toMaster()):(t.loadingMsgShown=!1,t.loadSuccessMsgText="加载用户音色完成",t.loadSuccessMsgShown=!0,setTimeout((function(){t.loadSuccessMsgShown=!1}),1e3),t.sampler=new B(e[1].data.data,(function(){console.log("sample loaded? ".concat(t.sampler.loaded))})).toMaster())})).catch((function(e){console.log("exception caught on getting waveform: ".concat(e)),t.loadingMsgShown=!1,t.loadFailMsgShown=!0,setTimeout((function(){t.loadFailMsgShown=!1}),1e3)}))}}),I=U,R=i("2877"),F=Object(R["a"])(I,n,o,!1,null,null,null);e["default"]=F.exports},"3c2a":function(t,e,i){},"3c43":function(t,e){e.endianness=function(){return"LE"},e.hostname=function(){return"undefined"!==typeof location?location.hostname:""},e.loadavg=function(){return[]},e.uptime=function(){return 0},e.freemem=function(){return Number.MAX_VALUE},e.totalmem=function(){return Number.MAX_VALUE},e.cpus=function(){return[]},e.type=function(){return"Browser"},e.release=function(){return"undefined"!==typeof navigator?navigator.appVersion:""},e.networkInterfaces=e.getNetworkInterfaces=function(){return{}},e.arch=function(){return"javascript"},e.platform=function(){return"browser"},e.tmpdir=e.tmpDir=function(){return"/tmp"},e.EOL="\n",e.homedir=function(){return"/"}},"3ca3":function(t,e,i){"use strict";var n=i("6547").charAt,o=i("69f3"),a=i("7dd0"),s="String Iterator",r=o.set,u=o.getterFor(s);a(String,"String",(function(t){r(this,{type:s,string:String(t),index:0})}),(function(){var t,e=u(this),i=e.string,o=e.index;return o>=i.length?{value:void 0,done:!0}:(t=n(i,o),e.index+=t.length,{value:t,done:!1})}))},"63fb":function(t,e,i){"use strict";var n=i("3c2a"),o=i.n(n);o.a},6547:function(t,e,i){var n=i("a691"),o=i("1d80"),a=function(t){return function(e,i){var a,s,r=String(o(e)),u=n(i),c=r.length;return u<0||u>=c?t?"":void 0:(a=r.charCodeAt(u),a<55296||a>56319||u+1===c||(s=r.charCodeAt(u+1))<56320||s>57343?t?r.charAt(u):a:t?r.slice(u,u+2):s-56320+(a-55296<<10)+65536)}};t.exports={codeAt:a(!1),charAt:a(!0)}},"65f0":function(t,e,i){var n=i("861d"),o=i("e8b5"),a=i("b622"),s=a("species");t.exports=function(t,e){var i;return o(t)&&(i=t.constructor,"function"!=typeof i||i!==Array&&!o(i.prototype)?n(i)&&(i=i[s],null===i&&(i=void 0)):i=void 0),new(void 0===i?Array:i)(0===e?0:e)}},"6d7b":function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("bc3a"),o=i.n(n),a=i("83d6"),s=o.a.create({baseURL:a["a"].waveformUrl})},"7b22":function(t,e,i){"use strict";var n=i("7b79"),o=i.n(n);o.a},"7b79":function(t,e,i){},"81d5":function(t,e,i){"use strict";var n=i("7b0b"),o=i("23cb"),a=i("50c4");t.exports=function(t){var e=n(this),i=a(e.length),s=arguments.length,r=o(s>1?arguments[1]:void 0,i),u=s>2?arguments[2]:void 0,c=void 0===u?i:o(u,i);while(c>r)e[r++]=t;return e}},"89e0":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon"},["play-circle"===t.iconType?i("svg",{attrs:{viewBox:"64 64 896 896",width:"1em",height:"1em",fill:"currentColor"}},[i("path",{attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}),i("path",{attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 0 0 398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 0 0 0-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}})]):"question-circle"===t.iconType?i("svg",{attrs:{viewBox:"64 64 896 896",width:"1em",height:"1em",fill:"currentColor"}},[i("path",{attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}),i("path",{attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0 1 30.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1 0 80 0 40 40 0 1 0-80 0z"}})]):t._e(),"check"===t.iconType?i("svg",{attrs:{viewBox:"64 64 896 896",width:"1em",height:"1em",fill:"currentColor"}},[i("path",{attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 0 0-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}})]):t._e(),"close"===t.iconType?i("svg",{attrs:{viewBox:"64 64 896 896",width:"1em",height:"1em",fill:"currentColor"}},[i("path",{attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 0 0 203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}})]):t._e(),"info-circle"===t.iconType?i("svg",{attrs:{viewBox:"64 64 896 896",width:"1em",height:"1em",fill:"currentColor"}},[i("path",{attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}),i("path",{attrs:{d:"M464 336a48 48 0 1 0 96 0 48 48 0 1 0-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}})]):t._e(),"redo"===t.iconType?i("svg",{attrs:{viewBox:"64 64 896 896",width:"1em",height:"1em",fill:"currentColor"}},[i("path",{attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 0 1-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 0 1-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 0 0-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}})]):t._e(),"bars"===t.iconType?i("svg",{attrs:{viewBox:"64 64 896 896",width:"1em",height:"1em",fill:"currentColor"}},[i("path",{attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"}})]):t._e(),"smile"===t.iconType?i("svg",{attrs:{viewBox:"64 64 896 896",width:"1em",height:"1em",fill:"currentColor"}},[i("path",{attrs:{d:"M288 421a48 48 0 1 0 96 0 48 48 0 1 0-96 0zm352 0a48 48 0 1 0 96 0 48 48 0 1 0-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 0 1 248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 0 1 249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 0 1 775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 0 1 775 775zM664 533h-48.1c-4.2 0-7.8 3.2-8.1 7.4C604 589.9 562.5 629 512 629s-92.1-39.1-95.8-88.6c-.3-4.2-3.9-7.4-8.1-7.4H360a8 8 0 0 0-8 8.4c4.4 84.3 74.5 151.6 160 151.6s155.6-67.3 160-151.6a8 8 0 0 0-8-8.4z"}})]):t._e(),"loading"===t.iconType?i("svg",{staticClass:"loading-circle",attrs:{viewBox:"0 0 1024 1024",width:"1em",height:"1em",fill:"currentColor"}},[i("path",{attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}})]):t._e(),"warning"===t.iconType?i("svg",{attrs:{viewBox:"64 64 896 896",width:"1em",height:"1em",fill:"currentColor"}},[i("path",{attrs:{d:"M464 720a48 48 0 1 0 96 0 48 48 0 1 0-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}})]):t._e()])},o=[],a={name:"Icon",props:{iconType:{type:String,required:!0}}},s=a,r=(i("0009"),i("2877")),u=Object(r["a"])(s,n,o,!1,null,null,null);e["a"]=u.exports},"8b27":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"message",class:{"is-shown":t.isShown}},[t._t("default")],2)},o=[],a={name:"Message",props:{isShown:{type:Boolean,default:!1}},methods:{push:function(t){this.msgList.push(t);document.querySelector(".message")}}},s=a,r=(i("fb3b"),i("2877")),u=Object(r["a"])(s,n,o,!1,null,null,null);e["a"]=u.exports},"92c1":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"p-keyboard"},[i("svg",{attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",preserveAspectRatio:"xMinYMin meet",viewBox:"0 0 1195.6 818.2"}},[i("path",{staticClass:"white-key",attrs:{pitch:"C",d:"M0.6,16.2l0,787.1c0,8.6,7,15.7,15.7,15.7h132.3c8.6,0,15.7-7,15.7-15.7V437.7c0-6.4-5.2-11.6-11.6-11.6h-32.1\n     c-8.6,0-15.7-7-15.7-15.7V0.5H16.3C7.6,0.5,0.6,7.6,0.6,16.2z"}}),i("path",{staticClass:"black-key ",attrs:{pitch:"C#",d:"M225.7,0.5v406c0,8.6-6.6,15.5-14.6,15.5h-85.3c-8.1,0-14.6-7-14.6-15.5V0.5H225.7z"}}),i("path",{staticClass:"white-key ",attrs:{pitch:"D",d:"M336.1,437.7v365.6c0,8.6-7,15.7-15.7,15.7H188.1c-8.6,0-15.7-7-15.7-15.7V437.7c0-6.4,5.2-11.6,11.6-11.6h32.1\n     c8.6,0,15.7-7,15.7-15.7V0.5h45v409.9c0,8.6,7,15.7,15.7,15.7h32.1C331,426.1,336.1,431.3,336.1,437.7z"}}),i("path",{staticClass:"black-key ",attrs:{pitch:"D#",d:"M397.5,0.5v406c0,8.6-6.6,15.5-14.6,15.5h-85.3c-8.1,0-14.6-7-14.6-15.5V0.5H397.5z"}}),i("path",{staticClass:"white-key ",attrs:{pitch:"E",d:"M508,16.2v787.1c0,8.6-7,15.7-15.7,15.7H360c-8.6,0-15.7-7-15.7-15.7V437.7c0-6.4,5.2-11.6,11.6-11.6H388\n     c8.6,0,15.7-7,15.7-15.7V0.5h88.7C501,0.5,508,7.6,508,16.2z"}}),i("path",{staticClass:"white-key ",attrs:{pitch:"F",d:"M516.2,16.2v787.1c0,8.6,7,15.7,15.7,15.7h132.3c8.6,0,15.7-7,15.7-15.7V437.7c0-6.4-5.2-11.6-11.6-11.6h-32.1\n     c-8.6,0-15.7-7-15.7-15.7V0.5h-88.7C523.2,0.5,516.2,7.6,516.2,16.2z"}}),i("path",{staticClass:"black-key ",attrs:{pitch:"F#",d:"M741.3,0.5v406c0,8.6-6.6,15.5-14.6,15.5h-85.3c-8.1,0-14.6-7-14.6-15.5V0.5H741.3z"}}),i("path",{staticClass:"white-key ",attrs:{pitch:"G",d:"M851.7,437.7v365.6c0,8.6-7,15.7-15.7,15.7H703.7c-8.6,0-15.7-7-15.7-15.7V437.7c0-6.4,5.2-11.6,11.6-11.6h32.1\n     c8.6,0,15.7-7,15.7-15.7V0.5h45v409.9c0,8.6,7,15.7,15.7,15.7h32.1C846.5,426.1,851.7,431.3,851.7,437.7z"}}),i("path",{staticClass:"black-key ",attrs:{pitch:"G#",d:"M913.1,0.5v406c0,8.6-6.6,15.5-14.6,15.5h-85.3c-8.1,0-14.6-7-14.6-15.5V0.5H913.1z"}}),i("path",{staticClass:"white-key ",attrs:{pitch:"A",d:"M1023.6,437.7v365.6c0,8.6-7,15.7-15.7,15.7H875.6c-8.6,0-15.7-7-15.7-15.7V437.7c0-6.4,5.2-11.6,11.6-11.6\n     h32.1c8.6,0,15.7-7,15.7-15.7V0.5h45v409.9c0,8.6,7,15.7,15.7,15.7h32.1C1018.4,426.1,1023.6,431.3,1023.6,437.7z"}}),i("path",{staticClass:"black-key ",attrs:{pitch:"A#",d:"M1085,0.5v406c0,8.6-6.6,15.5-14.6,15.5H985c-8.1,0-14.6-7-14.6-15.5V0.5H1085z"}}),i("path",{staticClass:"white-key ",attrs:{pitch:"B",d:"M1195.5,16.2v787.1c0,8.6-7,15.7-15.7,15.7h-132.3c-8.6,0-15.7-7-15.7-15.7V437.7c0-6.4,5.2-11.6,11.6-11.6\n     h32.1c8.6,0,15.7-7,15.7-15.7V0.5h88.7C1188.4,0.5,1195.5,7.6,1195.5,16.2z"}})])])},o=[],a=(i("cb29"),i("159b"),{name:"PKeyboard",data:function(){return{glide:!1}},props:{octave:{type:String,required:!0}},mounted:function(){var t=this,e=this.$el.getElementsByTagName("path");e.forEach((function(e){e.addEventListener("mousedown",(function(e){t.glide=!0,e.target.style.fill="var(--key-down-color)",t.$emit("notedown",e.target.getAttribute("pitch")+t.octave)})),e.addEventListener("mouseup",(function(e){t.glide=!1,e.target.style.fill="",t.$emit("noteup",e.target.getAttribute("pitch")+t.octave)})),e.addEventListener("mouseenter",(function(e){t.glide&&(e.target.style.fill="var(--key-down-color)",t.$emit("notedown",e.target.getAttribute("pitch")+t.octave))})),e.addEventListener("mouseleave",(function(e){e.target.style.fill="",t.$emit("noteup",e.target.getAttribute("pitch")+t.octave)}))})),document.addEventListener("mouseup",(function(){t.glide=!1})),document.addEventListener("mousedown",(function(){t.glide=!0}))}}),s=a,r=(i("7b22"),i("2877")),u=Object(r["a"])(s,n,o,!1,null,null,null);e["a"]=u.exports},b301:function(t,e,i){"use strict";var n=i("d039");t.exports=function(t,e){var i=[][t];return!i||!n((function(){i.call(null,e||function(){throw 1},1)}))}},b727:function(t,e,i){var n=i("f8c2"),o=i("44ad"),a=i("7b0b"),s=i("50c4"),r=i("65f0"),u=[].push,c=function(t){var e=1==t,i=2==t,c=3==t,h=4==t,l=6==t,p=5==t||l;return function(f,d,m,_){for(var y,g,v=a(f),T=o(v),S=n(d,m,3),b=s(T.length),A=0,k=_||r,x=e?k(f,b):i?k(f,0):void 0;b>A;A++)if((p||A in T)&&(y=T[A],g=S(y,A,v),t))if(e)x[A]=g;else if(g)switch(t){case 3:return!0;case 5:return y;case 6:return A;case 2:u.call(x,y)}else if(h)return!1;return l?-1:c||h?h:x}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},c6ba:function(t,e,i){},cb29:function(t,e,i){var n=i("23e7"),o=i("81d5"),a=i("44d2");n({target:"Array",proto:!0},{fill:o}),a("fill")},d3a7:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"message-container"},[t._t("default")],2)},o=[],a={name:"MessageContainer"},s=a,r=(i("63fb"),i("2877")),u=Object(r["a"])(s,n,o,!1,null,null,null);e["a"]=u.exports},d84e:function(t,e,i){"use strict";e["a"]="13.8.25"},ddb0:function(t,e,i){var n=i("da84"),o=i("fdbc"),a=i("e260"),s=i("9112"),r=i("b622"),u=r("iterator"),c=r("toStringTag"),h=a.values;for(var l in o){var p=n[l],f=p&&p.prototype;if(f){if(f[u]!==h)try{s(f,u,h)}catch(m){f[u]=h}if(f[c]||s(f,c,l),o[l])for(var d in a)if(f[d]!==a[d])try{s(f,d,a[d])}catch(m){f[d]=a[d]}}}},e8b5:function(t,e,i){var n=i("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}},fb3b:function(t,e,i){"use strict";var n=i("109c"),o=i.n(n);o.a},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-6cdae53c.07868909.js.map