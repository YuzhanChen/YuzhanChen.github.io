window.__require=function t(e,o,c){function n(r,s){if(!o[r]){if(!e[r]){var a=r.split("/");if(a=a[a.length-1],!e[a]){var h="function"==typeof __require&&__require;if(!s&&h)return h(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+r+"'")}r=a}var u=o[r]={exports:{}};e[r][0].call(u.exports,function(t){return n(e[r][1][t]||t)},u,u.exports,t,e,o,c)}return o[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<c.length;r++)n(c[r]);return n}({Button:[function(t,e,o){"use strict";cc._RF.push(e,"b7152RTKjVJTKvyfn9Uowpo","Button"),Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,n=c.ccclass,i=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.handleButtonClick=function(){cc.director.loadScene("Game")},e=__decorate([n],e)}(cc.Component));o.default=i,cc._RF.pop()},{}],Canvas:[function(t,e,o){"use strict";cc._RF.push(e,"4d8755SmF5LTJW2bJeNzyRD","Canvas"),Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,n=c.ccclass,i=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e=__decorate([n],e)}(cc.Component));o.default=i,cc._RF.pop()},{}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"652aee6BmBOw7lnxPktttI2","Game"),Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,n=c.ccclass,i=c.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisionManager=cc.director.getCollisionManager(),e.canvas=null,e.player=null,e.ground=null,e.groundY=0,e.arithmQuesLabel=null,e.maxHP=3,e.HPGauge=null,e.heartIcon=null,e.heartPool=new cc.NodePool,e.HP=0,e.starPrefab=null,e.starHeight=250,e.starPool=new cc.NodePool,e.hurtBackground=null,e.scoreLabel=null,e.arithmQuestion=s(),e.score=0,e.checkingAns=!1,e}return __extends(e,t),e.prototype.loseHP=function(){this.HP-=1,this.updateHPDisplay(),this.HP<=0&&this.gameover()},e.prototype.healHP=function(){this.HP<this.maxHP&&(this.HP+=1),this.updateHPDisplay()},e.prototype.updateHPDisplay=function(){for(;this.HPGauge.childrenCount;)this.heartPool.put(this.HPGauge.children[0]);for(var t=0;t<this.maxHP;t++){var e=this.heartPool.get()||cc.instantiate(this.heartIcon);e.color=t<this.HP?cc.color(255,0,0):cc.color(255,255,255),this.HPGauge.addChild(e)}},e.prototype.spwanNewStar=function(t,e){var o=this.starPool.get()||cc.instantiate(this.starPrefab);o.setPosition(e),o.getComponentInChildren(cc.Label).string=t.toString(),this.canvas.addChild(o)},e.prototype.collectAllStar=function(){for(var t=this.canvas.getChildByName("star");t;)this.starPool.put(t),t=this.canvas.getChildByName("star")},e.prototype.getNewQues=function(){this.arithmQuestion=s();var t=this.arithmQuestion;this.arithmQuesLabel.string=t.num1+"+"+t.num2+"=?",this.arithmQuesLabel.node.color=cc.color(255,255,255);for(var e=this.canvas.width/5-this.canvas.width/2,o=0,c=t.choise;o<c.length;o++){var n=c[o];this.spwanNewStar(n,cc.v2(e,this.groundY+this.starHeight)),e+=this.canvas.width/5}},e.prototype.gameover=function(){this.arithmQuesLabel.string="Game Over!",this.arithmQuesLabel.node.color=cc.color(255,0,0)},e.prototype.gamepause=function(){cc.director.pause()},e.prototype.gameresume=function(){cc.director.resume()},e.prototype.handlePlayerStarCollision=function(t){var e=this;if(!this.checkingAns){var o=t.getComponentInChildren(cc.Label).string;this.starPool.put(t),this.arithmQuesLabel.string=this.arithmQuestion.num1+"+"+this.arithmQuestion.num2+"="+o,this.arithmQuestion.ans.toString()==o?(this.arithmQuesLabel.node.color=cc.color(0,255,0),this.score+=1,this.scoreLabel.string="Score: "+this.score.toString()):(this.arithmQuesLabel.node.color=cc.color(255,0,0),this.HP-=1,cc.tween(this.hurtBackground).to(.2,{opacity:255}).call(function(){e.updateHPDisplay()}).to(.2,{opacity:0}).start()),this.checkingAns=!0,this.scheduleOnce(function(){e.collectAllStar(),e.HP<=0?e.gameover():(e.getNewQues(),e.checkingAns=!1)},1)}},e.prototype.onLoad=function(){this.HP=this.maxHP,this.updateHPDisplay(),this.collisionManager.enabled=!0,this.groundY=this.ground.y+this.ground.height/2,this.player.on("choose",this.handlePlayerStarCollision,this),this.getNewQues()},e.prototype.onDestroy=function(){this.player.off("choose",this.handlePlayerStarCollision,this)},__decorate([i(cc.Node)],e.prototype,"canvas",void 0),__decorate([i(cc.Node)],e.prototype,"player",void 0),__decorate([i(cc.Node)],e.prototype,"ground",void 0),__decorate([i(cc.Label)],e.prototype,"arithmQuesLabel",void 0),__decorate([i],e.prototype,"maxHP",void 0),__decorate([i(cc.Node)],e.prototype,"HPGauge",void 0),__decorate([i(cc.Prefab)],e.prototype,"heartIcon",void 0),__decorate([i(cc.Prefab)],e.prototype,"starPrefab",void 0),__decorate([i],e.prototype,"starHeight",void 0),__decorate([i(cc.Node)],e.prototype,"hurtBackground",void 0),__decorate([i(cc.Label)],e.prototype,"scoreLabel",void 0),e=__decorate([n],e)}(cc.Component);function s(){for(var t=Math.floor(9*Math.random())+1,e=Math.floor(9*Math.random())+1,o=t+e,c=[],n=Math.floor(4*Math.random()),i=0;i<4;++i)c.push(o+i-n);return{num1:t,num2:e,choise:c,ans:o}}o.default=r,cc._RF.pop()},{}],Home:[function(t,e,o){"use strict";cc._RF.push(e,"4242fQuqo9Gva6P9USzJ3Yq","Home"),Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,n=c.ccclass,i=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.startGame=function(){cc.director.loadScene("Game")},e=__decorate([n],e)}(cc.Component));o.default=i,cc._RF.pop()},{}],PauseMenu:[function(t,e,o){"use strict";cc._RF.push(e,"123689YRu9GxphvhKy6iPCL","PauseMenu"),Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,n=c.ccclass,i=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.show=function(){this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},e.prototype.toTitle=function(){cc.director.loadScene("Home")},e.prototype.onLoad=function(){this.node.active=!1,this.node.zIndex=1},e.prototype.start=function(){},e=__decorate([n],e)}(cc.Component));o.default=i,cc._RF.pop()},{}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"16f77rY3vJETbch2pS1YnbS","Player"),Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,n=c.ccclass,i=c.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jumpHeight=300,e.jumpDuration=.5,e.jumpTween=cc.tween().by(e.jumpDuration/2,{y:e.jumpHeight},{easing:"cubicOut"}).by(e.jumpDuration/2,{y:-e.jumpHeight},{easing:"cubicIn"}),e.isJumping=!1,e.moveAccel=500,e.maxSpeed=500,e.stopDeaccel=1e3,e.stopThreshold=10,e.canvas=null,e.xSpeed=0,e.accelLeft=!1,e.accelRight=!1,e.leftBtn=null,e.rightBtn=null,e.jumpBtn=null,e}return __extends(e,t),e.prototype.jump=function(){var t=this;this.isJumping||(this.isJumping=!0,cc.tween(this.node).then(this.jumpTween).call(function(){t.isJumping=!1}).start())},e.prototype.setAccelLeft=function(t){this.accelLeft=t},e.prototype.setAccelRight=function(t){this.accelRight=t},e.prototype.handleKeyDown=function(t){switch(t.keyCode){case cc.macro.KEY.space:this.jump();break;case cc.macro.KEY.a:this.accelLeft=!0;break;case cc.macro.KEY.d:this.accelRight=!0}},e.prototype.handleKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.a:this.accelLeft=!1;break;case cc.macro.KEY.d:this.accelRight=!1}},e.prototype.regUiControlEvents=function(t){var e=this;void 0===t&&(t=!0),t?(this.leftBtn.node.on("touchstart",function(){e.accelLeft=!0}),this.leftBtn.node.on("touchend",function(){e.accelLeft=!1}),this.leftBtn.node.on("touchcancel",function(){e.accelLeft=!1}),this.rightBtn.node.on("touchstart",function(){e.accelRight=!0}),this.rightBtn.node.on("touchend",function(){e.accelRight=!1}),this.rightBtn.node.on("touchcancel",function(){e.accelRight=!1}),this.jumpBtn.node.on("touchstart",this.jump,this)):(this.leftBtn.node.off("touchstart",function(){e.accelLeft=!0}),this.leftBtn.node.off("touchend",function(){e.accelLeft=!1}),this.leftBtn.node.off("touchcancel",function(){e.accelLeft=!1}),this.rightBtn.node.off("touchstart",function(){e.accelRight=!0}),this.rightBtn.node.off("touchend",function(){e.accelRight=!1}),this.rightBtn.node.off("touchcancel",function(){e.accelRight=!1}),this.jumpBtn.node.off("touchstart",this.jump,this))},e.prototype.onCollisionEnter=function(t,e){switch(t.tag){case 1:this.node.emit("choose",t.node)}},e.prototype.onLoad=function(){console.assert(!!this.canvas),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.handleKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.handleKeyUp,this),this.regUiControlEvents(!0)},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.handleKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.handleKeyUp,this),this.regUiControlEvents(!1)},e.prototype.update=function(t){var e=0;this.accelLeft&&this.xSpeed<=0?e=-this.moveAccel:this.accelRight&&this.xSpeed>=0?e=this.moveAccel:Math.abs(this.xSpeed)>this.stopThreshold?e=this.xSpeed>0?-this.stopDeaccel:this.stopDeaccel:this.xSpeed=0,this.xSpeed+=e*t,this.node.x+=this.xSpeed*t,this.node.x<-this.canvas.width/2?(this.xSpeed=0,this.node.x=-this.canvas.width/2):this.node.x>this.canvas.width/2&&(this.xSpeed=0,this.node.x=this.canvas.width/2)},__decorate([i],e.prototype,"jumpHeight",void 0),__decorate([i],e.prototype,"jumpDuration",void 0),__decorate([i],e.prototype,"moveAccel",void 0),__decorate([i],e.prototype,"maxSpeed",void 0),__decorate([i],e.prototype,"stopDeaccel",void 0),__decorate([i("\u5982\u679c\u53d1\u751f\u4e3b\u89d2\u539f\u5730\u6f02\u79fb\uff0c\u914c\u60c5\u8c03\u9ad8")],e.prototype,"stopThreshold",void 0),__decorate([i(cc.Node)],e.prototype,"canvas",void 0),__decorate([i(cc.Button)],e.prototype,"leftBtn",void 0),__decorate([i(cc.Button)],e.prototype,"rightBtn",void 0),__decorate([i(cc.Button)],e.prototype,"jumpBtn",void 0),e=__decorate([n],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],Star:[function(t,e,o){"use strict";cc._RF.push(e,"e4b831fkMZIZ56zWfIbP4AG","Star"),Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,n=c.ccclass,i=c.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return __extends(e,t),e.prototype.start=function(){},__decorate([i(cc.Label)],e.prototype,"label",void 0),__decorate([i],e.prototype,"text",void 0),e=__decorate([n],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],VolumeSlider:[function(t,e,o){"use strict";cc._RF.push(e,"b4648lNepxDt6HJhUpPgx8Q","VolumeSlider"),Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,n=c.ccclass,i=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.slider=null,e}return __extends(e,t),e.prototype.handleVolumeToggle=function(t,e){t.isChecked?(this.slider.progress=0,this.slider.enabled=!1):this.slider.enabled=!0},e.prototype.onLoad=function(){this.slider=this.node.getComponent(cc.Slider),this.slider.enabled=!1},e.prototype.start=function(){},e=__decorate([n],e)}(cc.Component));o.default=i,cc._RF.pop()},{}]},{},["Button","Canvas","Game","Home","PauseMenu","Player","Star","VolumeSlider"]);